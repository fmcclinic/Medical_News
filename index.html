<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FMC Website</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: Arial, sans-serif;
        }

        body {
            width: 100%;
            overflow-x: hidden;
            padding-top: 70px; /* Height of header */
        }

        iframe {
            width: 100%;
            border: none;
            display: block;
            transition: height 0.3s ease;
        }

        /* Header Styles */
        .header {
            height: 70px;
            padding: 0 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background-color: white;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
        }

        .logo {
            height: 50px;
        }

        .logo img {
            height: 100%;
        }

        .nav-container {
            display: flex;
            flex-grow: 1;
            justify-content: flex-end;
            align-items: center;
            gap: 15px;
        }

        .main-nav {
            display: flex;
            gap: 15px;
            list-style: none;
            margin-right: 20px;
        }

        .main-nav a {
            text-decoration: none;
            color: #333;
            font-size: 14px;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 4px;
            padding: 6px 8px;
            border-radius: 4px;
            white-space: nowrap;
            transition: color 0.3s ease;
            cursor: pointer;
        }

        .main-nav a.active,
        .main-nav a:hover {
            color: #007bff;
        }

        .status-container {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        #openStatus {
            font-size: 14px;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 4px;
            white-space: nowrap;
        }

        .contact-group {
            display: flex;
            align-items: center;
            gap: 4px;
            text-decoration: none;
            color: #007bff;
            font-weight: 500;
            font-size: 14px;
            white-space: nowrap;
        }

        .appointment-btn {
            background: #007bff;
            color: white;
            padding: 6px 12px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 500;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 4px;
            white-space: nowrap;
            transition: background-color 0.3s ease;
        }

        .appointment-btn:hover {
            background: #0056b3;
        }

        .mobile-menu-btn {
            display: none;
        }

        @media (max-width: 1024px) {
            .header {
                height: 60px;
                padding: 0 15px;
            }

            body {
                padding-top: 60px;
            }

            .mobile-menu-btn {
                display: block;
            }

            .nav-container {
                position: fixed;
                top: 60px;
                left: 0;
                right: 0;
                background: white;
                flex-direction: column;
                padding: 15px;
                transform: translateY(-150%);
                transition: transform 0.3s ease;
                box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            }

            .nav-container.active {
                transform: translateY(0);
            }

            .main-nav {
                flex-direction: column;
                width: 100%;
                margin-right: 0;
            }

            .status-container {
                flex-direction: column;
                width: 100%;
                align-items: stretch;
            }
        }
    </style>
</head>
<body>
    <!-- Header Section -->
    <header class="header">
        <div class="logo">
            <img src="header/logo.png" alt="FMC">
        </div>
        <button class="mobile-menu-btn" id="menuBtn" aria-label="Toggle menu">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <line x1="3" y1="12" x2="21" y2="12"></line>
                <line x1="3" y1="6" x2="21" y2="6"></line>
                <line x1="3" y1="18" x2="21" y2="18"></line>
            </svg>
        </button>
        <div class="nav-container">
            <nav>
                <ul class="main-nav">
                    <li><a href="#hero" data-section="hero">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path></svg>
                        Trang chủ
                    </a></li>
                    <li><a href="#specialist" data-section="specialist">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"></path></svg>
                        Chuyên khoa
                    </a></li>
                    <li><a href="#news" data-section="news">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"></path><polyline points="14 2 14 8 20 8"></polyline></svg>
                        Tin tức
                    </a></li>
                </ul>
            </nav>
            <div class="status-container">
                <span id="openStatus">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg>
                    <span>Đang mở cửa</span>
                </span>
                <a href="tel:02835355353" class="contact-group">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path></svg>
                    Liên hệ - 028 3535 5353
                </a>
                <button class="appointment-btn" data-section="contact">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="18" height="18" x="3" y="4" rx="2" ry="2"></rect><line x1="16" x2="16" y1="2" y2="6"></line><line x1="8" x2="8" y1="2" y2="6"></line><line x1="3" x2="21" y1="10" y2="10"></line></svg>
                    Đặt lịch khám
                </button>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <iframe src="hero/hero.html" scrolling="no" class="section-frame" id="hero"></iframe>
    <iframe src="specialist/specialist.html" scrolling="no" class="section-frame" id="specialist"></iframe>
    <iframe src="news/news.html" scrolling="no" class="section-frame" id="news"></iframe>
    <iframe src="contact/contact.html" scrolling="no" class="section-frame" id="contact"></iframe>
    <iframe src="https://fmcclinic.github.io/chatViaLM/" scrolling="no" class="section-frame" id="chat"></iframe>

    <script>
        // Navigation
        function scrollToSection(sectionId) {
            const section = document.getElementById(sectionId);
            if (section) {
                const headerHeight = document.querySelector('.header').offsetHeight;
                const sectionTop = section.offsetTop - headerHeight;
                window.scrollTo({
                    top: sectionTop,
                    behavior: 'smooth'
                });
                
                // Update active state
                document.querySelectorAll('.main-nav a').forEach(link => {
                    link.classList.remove('active');
                    if (link.getAttribute('data-section') === sectionId) {
                        link.classList.add('active');
                    }
                });
            }
        }

        // Setup navigation click handlers
        document.querySelectorAll('.main-nav a, .appointment-btn').forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                const sectionId = link.getAttribute('data-section');
                scrollToSection(sectionId);
                
                // Close mobile menu if open
                if (window.innerWidth <= 1024) {
                    document.querySelector('.nav-container').classList.remove('active');
                    updateMobileMenuIcon(false);
                }
            });
        });

        // Mobile menu
        const menuBtn = document.getElementById('menuBtn');
        const navContainer = document.querySelector('.nav-container');

        function updateMobileMenuIcon(isOpen) {
            const icon = menuBtn.querySelector('svg');
            if (isOpen) {
                icon.innerHTML = '<line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line>';
            } else {
                icon.innerHTML = '<line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line>';
            }
        }

        menuBtn.addEventListener('click', () => {
            const isOpen = navContainer.classList.toggle('active');
            updateMobileMenuIcon(isOpen);
        });

        // Open Status
        function updateOpenStatus() {
            const now = new Date();
            const day = now.getDay();
            const hour = now.getHours();
            
            const statusElement = document.querySelector('#openStatus span');
            const statusIcon = document.querySelector('#openStatus svg');
            let isOpen = false;

            if (day === 0) {
                isOpen = hour >= 8 && hour < 12;
            } else {
                isOpen = hour >= 8 && hour < 20;
            }

            statusElement.textContent = isOpen ? 'Đang mở cửa' : 'Đang đóng cửa';
            const color = isOpen ? '#28a745' : '#dc3545';
            statusElement.style.color = color;
            statusIcon.style.stroke = color;
        }

        updateOpenStatus();
        setInterval(updateOpenStatus, 60000);

        // Handle iframe heights
        window.addEventListener('message', function(event) {
            const sourceFrame = Array.from(document.querySelectorAll('.section-frame'))
                .find(iframe => iframe.contentWindow === event.source);
            
            if (sourceFrame && event.data.height) {
                sourceFrame.style.height = `${event.data.height}px`;
            }
        });

     // Active section tracking
     window.addEventListener('scroll', () => {
           const headerHeight = document.querySelector('.header').offsetHeight;
           const scrollPosition = window.scrollY + headerHeight + 100; // Offset để active sớm hơn một chút

           // Tìm section đang hiển thị
           document.querySelectorAll('.section-frame').forEach(section => {
               const sectionTop = section.offsetTop;
               const sectionBottom = sectionTop + section.offsetHeight;
               
               if (scrollPosition >= sectionTop && scrollPosition < sectionBottom) {
                   // Update active state trong menu
                   document.querySelectorAll('.main-nav a').forEach(link => {
                       link.classList.remove('active');
                       if (link.getAttribute('data-section') === section.id) {
                           link.classList.add('active');
                       }
                   });
               }
           });
       });

       // Handle initial section loading
       let loadedSections = 0;
       const totalSections = document.querySelectorAll('.section-frame').length;

       document.querySelectorAll('.section-frame').forEach(frame => {
           frame.onload = () => {
               loadedSections++;
               if (loadedSections === totalSections) {
                   // Tất cả sections đã load xong
                   // Kiểm tra nếu có hash trong URL để scroll đến section tương ứng
                   if (window.location.hash) {
                       const sectionId = window.location.hash.substring(1);
                       setTimeout(() => {
                           scrollToSection(sectionId);
                       }, 100);
                   }
               }
           };
       });

       // Handle resize
       let resizeTimeout;
       window.addEventListener('resize', () => {
           clearTimeout(resizeTimeout);
           resizeTimeout = setTimeout(() => {
               // Cập nhật chiều cao của các iframe khi resize
               document.querySelectorAll('.section-frame').forEach(frame => {
                   frame.contentWindow.postMessage('requestHeight', '*');
               });
           }, 250);
       });

       // Handle errors
       document.querySelectorAll('.section-frame').forEach(frame => {
           frame.onerror = () => {
               console.error(`Failed to load section: ${frame.src}`);
               frame.style.display = 'none';
           };
       });
   </script>
</body>
</html>