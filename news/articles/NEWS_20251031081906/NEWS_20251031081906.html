<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bác sĩ sẽ làm gì để Chẩn đoán Thoái hóa khớp gối  - Tin Tức Y Khoa</title>
    
<script src="https://code.responsivevoice.org/responsivevoice.js?key=30xj8le1"></script>
        
  <script>
function waitForResponsiveVoice() {
    return new Promise((resolve, reject) => {
        let attempts = 0;
        const checkResponsiveVoice = setInterval(() => {
            attempts++;
            if (window.responsiveVoice && window.responsiveVoice.voiceSupport()) {
                clearInterval(checkResponsiveVoice);
                resolve();
            } else if (attempts > 50) { 
                clearInterval(checkResponsiveVoice);
                reject(new Error('ResponsiveVoice không load được'));
            }
        }, 100);
    });
}
    </script>


        <style>
         
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            background: #f5f5f5;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            flex: 1;
        }

         
        .article-category {
            display: inline-block;
            background: #0070c0;
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9em;
            margin-bottom: 15px;
        }

        .article-title {
            font-size: 2em;
            margin-bottom: 15px;
            line-height: 1.2;
            color: #333;
            padding: 10px;
        }

        .article-meta {
            color: #666;
            font-size: 0.9em;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 15px;
            flex-wrap: wrap;
        }

        .reading-time {
            display: inline-flex;
            align-items: center;
            gap: 5px;
            padding: 3px 8px;
            background: #f0f0f0;
            border-radius: 15px;
        }

         
        .article-content {
            background: white;
            padding: 30px;
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .featured-image {
            width: 100%;
            height: auto;
            max-height: 500px;
            object-fit: cover;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .article-content p {
            margin-bottom: 15px;
            line-height: 1.8;
            padding: 10px;
            border-radius: 4px;
            transition: all 0.3s ease;
        }

        .article-content p.current,
        .article-title.current {
            background: #f0f9ff;
            border-left: 3px solid #0070c0;
            padding-left: 15px;
        }

         
        .speech-controls {
            margin: 20px 0;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 8px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }

        .speech-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 15px;
        }

        .speech-title {
            font-size: 1.1em;
            font-weight: bold;
            color: #333;
        }

        .controls-container {
            display: flex;
            align-items: center;
            gap: 20px;
            flex-wrap: wrap;
        }

        .control-button {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px 20px;
            background: #0070c0;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .control-button:hover {
            opacity: 0.9;
            transform: translateY(-1px);
        }

        .control-button:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }

        .speed-control {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        select {
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            background: white;
            min-width: 120px;
        }

        .progress-container {
            margin-top: 15px;
            background: #e9ecef;
            height: 4px;
            border-radius: 2px;
            overflow: hidden;
        }

        .progress-bar {
            height: 100%;
            background: #0070c0;
            width: 0;
            transition: width 0.3s;
        }

        .status {
            padding: 10px 15px;
            margin: 10px 0;
            border-radius: 4px;
            display: none;
        }

        .status.active {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .status.reading {
            background: #e3f2fd;
            color: #0070c0;
            border-left: 4px solid #0070c0;
        }

        .status.paused {
            background: #fff3e0;
            color: #ef6c00;
            border-left: 4px solid #ef6c00;
        }

        .status.error {
            background: #ffebee;
            color: #c62828;
            border-left: 4px solid #c62828;
        }

         
        .related-section {
            margin-top: 40px;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .related-title {
            font-size: 1.5em;
            margin-bottom: 20px;
            color: #333;
        }

        .related-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
        }

        .related-article {
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            transition: transform 0.3s;
            height: 100%;
            display: flex;
            flex-direction: column;
        }

        .related-article:hover {
            transform: translateY(-3px);
        }

        .related-article img {
            width: 100%;
            height: 180px;
            object-fit: cover;
        }

        .related-article h3 {
            padding: 15px;
            margin: 0;
            flex: 1;
        }

        .related-article a {
            color: #333;
            text-decoration: none;
        }

        .related-article a:hover {
            color: #0070c0;
        }

        .related-article .date {
            display: block;
            padding: 0 15px 15px;
            color: #666;
            font-size: 0.9em;
        }

         
        .share-section {
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid #eee;
        }

        .share-buttons {
            display: flex;
            gap: 10px;
        }

        .share-button {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            border: none;
            border-radius: 4px;
            color: white;
            cursor: pointer;
            font-size: 14px;
            transition: opacity 0.3s;
        }

        .share-button:hover {
            opacity: 0.9;
        }

        .share-button.facebook {
            background: #1877f2;
        }

        .share-button.twitter {
            background: #1da1f2;
        }

         
        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }

            .article-title {
                font-size: 1.8em;
            }

            .article-meta {
                flex-direction: column;
                align-items: flex-start;
            }

            .controls-container {
                flex-direction: column;
                align-items: stretch;
            }

            .related-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <span class="article-category">Khoa Cơ Xương Khớp</span>
        
        <h1 class="article-title">Bác sĩ sẽ làm gì để Chẩn đoán Thoái hóa khớp gối </h1>
        
        <div class="article-meta">
            <span>Đăng ngày 31/10/2025</span>
            <span class="reading-time">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="10"></circle>
                    <polyline points="12 6 12 12 16 14"></polyline>
                </svg>
                9 phút đọc
            </span>
        </div>

        <img src="https://github.com/fmcclinic/Medical_News/blob/main/news/image/What%20will%20the%20doctor%20do%20to%20diagnose%20knee%20osteoarthritis.gif?raw=true" alt="Bác sĩ sẽ làm gì để Chẩn đoán Thoái hóa khớp gối " class="featured-image">

        <div class="article-content">



<div class="speech-controls">
    <div class="speech-header">
        <span class="speech-title">Nghe bài viết</span>
    </div>
    
    <div class="controls-container">
        
        <button id="mp3Button" class="control-button" onclick="toggleMP3()">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <path d="M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3z"/>
                <path d="M19 10v2a7 7 0 0 1-14 0v-2"/>
            </svg>
            <span>Audio đã thu</span>
        </button>

        
        <button id="playButton" class="control-button">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <polygon points="5 3 19 12 5 21 5 3"></polygon>
            </svg>
            <span>Đọc bài viết</span>
        </button>
        
        
        <div class="speed-control">
            <select id="voiceSelect">
                <option value="Vietnamese Female">Giọng Nữ</option>
                <option value="Vietnamese Male">Giọng Nam</option>
            </select>
            <select id="rateSelect">
                <option value="0.8">Chậm</option>
                <option value="1" selected>Bình thường</option>
                <option value="1.2">Nhanh</option>
            </select>
        </div>
    </div>

    
    <audio id="mp3Player" class="audio-player" controls style="width: 100%; margin-top: 10px; display: none;">
        <source id="mp3Source" type="audio/mpeg">
        Trình duyệt không hỗ trợ phát audio.
    </audio>

    <div class="progress-container">
        <div id="progress" class="progress-bar"></div>
    </div>

    <div id="status" class="status">
        <span id="statusText"></span>
    </div>
</div>


            <p><strong>Chẩn đoán các bệnh lý khớp gối thường gặp</strong></p><p>Ba trong số những nguyên nhân phổ biến nhất gây đau khớp gối là thoái hóa khớp (OA), đau xương bánh chè (PFP) và rách sụn chêm.</p><p><strong>1. Thoái hóa khớp gối (Knee Osteoarthritis – OA)</strong></p><p><br></p><p>Thoái hóa khớp là một rối loạn khớp mạn tính biểu hiện là sự suy giảm cấu trúc và chức năng của các khớp hoạt dịch. Sự thoái hóa này không chỉ ảnh hưởng đến sụn khớp mà còn ảnh hưởng đến xương dưới sụn, màng hoạt dịch, sụn chêm, dây chằng và các cấu trúc xung quanh khác.</p><p><strong>Biểu hiện lâm sàng và Tiêu chí chẩn đoán:</strong></p><p>• <strong>Triệu chứng cơ năng:</strong> Các triệu chứng thường gặp nhất của thoái hóa khớp gối là <strong>đau gối liên quan đến hoạt động</strong> (có độ nhạy 95%) và/hoặc <strong>hạn chế chức năng</strong> (độ nhạy 56%). Đau là lý do chính khiến người bệnh tìm kiếm sự tư vấn y tế.</p><p>• <strong>Cứng khớp:</strong> Các triệu chứng thường đi kèm với tình trạng cứng khớp buổi sáng kéo dài không lâu, thường là <strong>dưới 30 phút</strong> (độ nhạy 88%). Ngoài ra, có thể xuất hiện sưng (độ nhạy 43%) và cảm giác lỏng gối hoặc khuỵu gối (độ đặc hiệu 79%).</p><p>• <strong>Dấu hiệu thực thể:</strong> Các dấu hiệu chính khi thăm khám thực thể thoái hóa khớp gối bao gồm <strong>tiếng lạo xạo</strong> (crepitus) (độ nhạy 89%), <strong>phì đại xương</strong> (độ đặc hiệu 95%), và <strong>hạn chế phạm vi chuyển động</strong> (độ đặc hiệu 96%).</p><p>• <strong>Chẩn đoán lâm sàng theo hướng dẫn:</strong> Thoái hóa khớp gối là chẩn đoán có khả năng cao nhất đối với những người <strong>từ 45 tuổi trở lên</strong> có đau khớp gối liên quan đến hoạt động và <strong>cứng khớp buổi sáng kéo dài không quá 30 phút</strong> (độ nhạy 95%; độ đặc hiệu 69%). Theo hướng dẫn của Viện Sức khỏe và Chăm sóc Quốc gia (NICE) năm 2022, có thể chẩn đoán thoái hóa khớp chỉ dựa trên lâm sàng mà không cần chẩn đoán hình ảnh đối với những người trên 45 tuổi đáp ứng các tiêu chí trên.</p><p>• <strong>Tiêu chí ACR:</strong> Tiêu chuẩn chẩn đoán thoái hóa khớp gối của Đại học Thấp khớp Hoa Kỳ (ACR) yêu cầu phải có <strong>đau gối</strong> cộng với <strong>ít nhất một dấu hiệu</strong> sau: tuổi trên 50, cứng khớp dưới 30 phút, hoặc có lạo xạo khớp cộng với có gai xương.</p><p><strong>Đánh giá cận lâm sàng và Hình ảnh học:</strong></p><p>• <strong>X-quang:</strong> Chẩn đoán hình ảnh như X-quang hoặc MRI có thể cho thấy mức độ tổn thương sụn khớp và hỗ trợ chẩn đoán. X-quang là phương pháp đánh giá đơn giản, ít tốn kém và phổ biến nhất. Tuy nhiên, <strong>chụp X-quang không bắt buộc</strong> để chẩn đoán OA vì chẩn đoán chủ yếu dựa vào tiền sử bệnh và khám thực thể.</p><p>• <strong>Chỉ định X-quang:</strong> Nên chụp X-quang khi tình trạng không điển hình (ví dụ: cứng khớp kéo dài, đau nghiêm trọng) hoặc khi nghi ngờ chẩn đoán khác mạnh mẽ, hoặc khi có sự thay đổi nhanh chóng của các đặc điểm lâm sàng. X-quang có thể giúp tài liệu hóa giai đoạn nghiêm trọng của OA, tiên lượng, và định hướng cho phẫu thuật.</p><p>• <strong>Kỹ thuật chụp X-quang:</strong> Đối với thoái hóa khớp gối, các tư thế chụp X-quang khuyến nghị bao gồm tư thế đứng thẳng (AP), tư thế nghiêng đứng khi gối duỗi, và tư thế nhìn ngang xương bánh chè. Điều quan trọng là phim X-quang phải được chụp khi người bệnh <strong>đang đứng</strong> để phản ánh chính xác tình trạng hẹp khe khớp.</p><p>• <strong>Dấu hiệu X-quang của OA:</strong> Các dấu hiệu trên X-quang bao gồm hẹp khe khớp, hình thành gai xương, xơ hóa dưới sụn, và nang dưới sụn. Mức độ nghiêm trọng của bệnh được đánh giá bằng thang điểm Kellgren và Lawrence (K-L).</p><p>• <strong>MRI/CT Scan:</strong> MRI hoặc CT scan có thể được chỉ định nếu cần xem xét kỹ hơn các mô trong khớp. Chẩn đoán thoái hóa khớp gối cũng có thể được đánh giá bằng phương tiện hình ảnh như cộng hưởng từ và siêu âm, vì chúng có thể hình dung được những thay đổi trong tất cả các cấu trúc, bao gồm viêm màng hoạt dịch, tổn thương tủy xương (BMLs).</p><p><strong>2. Đau xương bánh chè (Patellofemoral Pain – PFP)</strong></p><p><br></p><p>Đau xương bánh chè là tình trạng đau phía sau hoặc xung quanh xương bánh chè.</p><p><strong>Biểu hiện lâm sàng và Chẩn đoán:</strong></p><p>• <strong>Đặc điểm:</strong> PFP thường xảy ra ở người trẻ tuổi, hoạt động thể chất, với khởi phát từ từ, đau lan tỏa ở phía trước gối, xung quanh hoặc phía sau xương bánh chè.</p><p>• <strong>Yếu tố tăng nặng:</strong> Cơn đau tăng nặng khi chịu tải trên gối gấp (ví dụ: leo cầu thang). Cơn đau hiếm khi xuất hiện khi khớp xương bánh chè không chịu tải, chẳng hạn như khi ngồi.</p><p>• <strong>Xét nghiệm lâm sàng:</strong> Không có xét nghiệm lâm sàng dứt khoát để chẩn đoán PFP; nó là một chẩn đoán loại trừ sau khi đã loại trừ các bệnh lý nội khớp và quanh xương bánh chè khác.</p><p>• <strong>Xét nghiệm tốt nhất:</strong> Xét nghiệm lâm sàng tốt nhất để chẩn đoán PFP là <strong>sự xuất hiện đau gối phía trước khi thực hiện động tác squat một chân</strong> (độ nhạy xấp xỉ 91%; độ đặc hiệu 50%).</p><p>• <strong>Chẩn đoán hình ảnh:</strong> Chẩn đoán hình ảnh, bao gồm X-quang hoặc siêu âm, không cần thiết ban đầu để chẩn đoán PFP. Tuy nhiên, nếu không đáp ứng với điều trị, hình ảnh học có thể được sử dụng để xác định các nguyên nhân gây đau thay thế. Siêu âm được ghi nhận có độ nhạy 85% và độ đặc hiệu 100% đối với PFP trong trường hợp không có sẵn MRI hoặc có chống chỉ định.</p><p><strong>3. Rách sụn chêm (Meniscal Tears)</strong></p><p><br></p><p>Sụn chêm là cấu trúc sụn sợi trong khớp gối, bao gồm hai thành phần hình bán nguyệt (sụn chêm trong và sụn chêm ngoài).</p><p><strong>Biểu hiện lâm sàng và Chẩn đoán:</strong></p><p>• <strong>Triệu chứng:</strong> Rách sụn chêm thường biểu hiện bằng <strong>đau gối khu trú tại đường khớp</strong> và kèm theo tràn dịch.</p><p>&nbsp;&nbsp;&nbsp;&nbsp;◦ <strong>Rách do chấn thương:</strong> Khởi phát cấp tính, thường xảy ra sau chấn thương xoắn/xoay không tiếp xúc ở người trẻ tuổi.</p><p>&nbsp;&nbsp;&nbsp;&nbsp;◦ <strong>Rách thoái hóa:</strong> Khởi phát từ từ, thường xảy ra ở người lớn tuổi (từ 40 tuổi trở lên) và có thể đi kèm với thoái hóa khớp gối.</p><p>• <strong>Triệu chứng cơ học:</strong> Các triệu chứng cơ học như tiếng lách cách, kẹt khớp hoặc khóa khớp có độ nhạy (0.32–0.69) và độ đặc hiệu (0.45–0.74) ở mức trung bình.</p><p>• <strong>Thăm khám lâm sàng:</strong> Các xét nghiệm lâm sàng hỗ trợ chẩn đoán rách sụn chêm bằng cách kích thích các triệu chứng:</p><p>&nbsp;&nbsp;&nbsp;&nbsp;◦ <strong>Nghiệm pháp McMurray:</strong> Bao gồm xoay gối đồng thời (xoay trong hoặc ngoài để kiểm tra sụn chêm bên hoặc giữa tương ứng) và duỗi gối. Nghiệm pháp này có độ nhạy 61% và độ đặc hiệu 84%.</p><p>&nbsp;&nbsp;&nbsp;&nbsp;◦ <strong>Đau khi ấn vào đường khớp:</strong> Có độ nhạy 83% và độ đặc hiệu 83%.</p><p>&nbsp;&nbsp;&nbsp;&nbsp;◦ Sự kết hợp của các xét nghiệm lâm sàng (bao gồm McMurray và đau khi ấn vào đường khớp) cho thấy kết quả chẩn đoán tốt hơn so với các phát hiện riêng lẻ.</p><p><strong>Đánh giá hình ảnh học:</strong></p><p>• <strong>MRI:</strong> Chụp cộng hưởng từ (MRI) có thể xác định loại vết rách sụn chêm và đánh giá các dây chằng, hỗ trợ các bác sĩ chỉnh hình trong việc lập kế hoạch trước phẫu thuật. MRI có độ chính xác chẩn đoán tốt (so với nội soi khớp) với độ nhạy từ 78% đến 89% và độ đặc hiệu từ 88% đến 95%.</p><p>• <strong>Chỉ định MRI:</strong> Việc sử dụng MRI một cách hệ thống không được khuyến nghị trong đánh giá ban đầu, đặc biệt ở người trung niên và người lớn tuổi, vì rách sụn chêm không triệu chứng khá phổ biến ở nhóm này. MRI nên được dành riêng cho các trường hợp phức tạp hơn, ví dụ như triệu chứng dai dẳng mà không có chẩn đoán rõ ràng.</p><p><strong>4. Các phương pháp đánh giá xương khớp chung</strong></p><p><br></p><p><strong>Đánh giá mật độ khoáng xương (BMD) và nguy cơ gãy xương:</strong></p><p>• <strong>Xạ hấp thụ tia X năng lượng kép (DXA):</strong> Được coi là <strong>tiêu chuẩn vàng</strong> để đo mật độ khoáng xương (BMD) và chẩn đoán loãng xương. DXA cũng được khuyến nghị để theo dõi sự thay đổi BMD theo thời gian và xác định nguy cơ gãy xương.</p><p>&nbsp;&nbsp;&nbsp;&nbsp;◦ <strong>Đánh giá loãng xương:</strong> DXA ở hông và cột sống nên được đo lường. Theo Tổ chức Y tế Thế giới (WHO), loãng xương được chẩn đoán khi BMD đo được thấp hơn 2.5 độ lệch chuẩn so với giá trị trung bình của người lớn trẻ khỏe mạnh (T-score ≤−2.5).</p><p>• <strong>QCT:</strong> <strong>Chụp cắt lớp vi tính định lượng (QCT)</strong> là một lựa chọn thay thế khả thi cho DXA khi DXA không có sẵn, nhờ độ chính xác cao. QCT có ưu điểm là có thể hạn chế đo lường chỉ ở xương bè và có thể giúp xác định các hiện vật do bệnh thoái hóa khớp hoặc vôi hóa động mạch.</p><p>• <strong>QUS:</strong> <strong>Siêu âm định lượng (QUS)</strong> là một thủ tục không xâm lấn, đặc biệt hữu ích để phát hiện các thay đổi liên quan đến tuổi tác, mãn kinh, và các yếu tố lâm sàng làm tăng nguy cơ loãng xương, nhưng độ chính xác của nó kém hơn DXA.</p><p><strong>Đánh giá nguy cơ gãy xương:</strong></p><p>• <strong>Công cụ FRAX:</strong> Công cụ Đánh giá Nguy cơ Gãy xương (FRAX) tích hợp trong máy DXA, ước tính xác suất gãy xương lớn và gãy cổ xương đùi trong 10 năm.</p><p><strong>Đánh giá chất lượng xương:</strong></p><p>• <strong>Điểm xương bè (TBS):</strong> Là một công cụ phân tích mới được phát triển để đo lường kết cấu mức độ xám trên hình ảnh DXA của cột sống thắt lưng, cho phép kiểm tra chi tiết hơn vi kiến trúc xương bè. TBS hiện tại được coi là một công cụ bổ sung cho các phương pháp đánh giá nguy cơ gãy xương khác và trong chẩn đoán phân biệt các rối loạn cấu trúc xương trong loãng xương thứ phát.</p>
            <div class="share-section">
                <div class="share-buttons">
                    <button onclick="shareOnFacebook()" class="share-button facebook">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"></path>
                        </svg>
                        Chia sẻ Facebook
                    </button>
                    <button onclick="shareOnTwitter()" class="share-button twitter">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"></path>
                        </svg>
                        Chia sẻ Twitter
                    </button>
                </div>
            </div>
        </div>

        <div class="related-section">
            <h2 class="related-title">Bài viết liên quan</h2>
            <div class="related-grid">
                
        <div class="related-article">
          <a href="../NEWS_20251030171907/NEWS_20251030171907.html">
            <img src="https://github.com/fmcclinic/Medical_News/blob/main/news/image/Tho%C3%A1i-h%C3%B3a-kh%E1%BB%9Bp-g%E1%BB%91i.gif?raw=true" alt=" Điều Trị  Thoái hóa khớp gối">
          </a>
          <h3>
            <a href="../NEWS_20251030171907/NEWS_20251030171907.html"> Điều Trị  Thoái hóa khớp gối</a>
          </h3>
          <span class="date">30/10/2025</span>
        </div>
      
        <div class="related-article">
          <a href="../NEWS_20251030075627/NEWS_20251030075627.html">
            <img src="https://www.mgs.physio/app/uploads/2023/10/knee-osteoarthritis-and-how-to-avoid-surgery-2048x1368.jpg" alt="Thoái hóa khớp gối">
          </a>
          <h3>
            <a href="../NEWS_20251030075627/NEWS_20251030075627.html">Thoái hóa khớp gối</a>
          </h3>
          <span class="date">30/10/2025</span>
        </div>
                  </div>
        </div>
    </div>

<script>

let currentMP3File = null;
let audioPreviewUrl = null;
let isPlaying = false;
let isTTSPlaying = false;
let isMP3Playing = false;
let ttsInitialized = false;
let currentParagraphIndex = 0;
let paragraphs = [];


const TTS_CONFIG = {
    VOICE_OPTIONS: {
        'Vietnamese Female': {
            name: 'Vietnamese Female',
            lang: 'vi-VN',
            rate: 1,
            pitch: 1.1,
            volume: 1
        },
        'Vietnamese Male': {
            name: 'Vietnamese Male',
            lang: 'vi-VN',
            rate: 1,
            pitch: 0.9,
            volume: 1
        }
    },
    PAUSE_BETWEEN: 500 
};


document.addEventListener('DOMContentLoaded', function() {
    
    if (typeof responsiveVoice !== 'undefined') {
        responsiveVoice.OnVoiceReady = function() {
            console.log('ResponsiveVoice sẵn sàng');
            initTTS();
            setupMP3EventListeners();
        };
    }

    
    window.scrollTo(0, 0);
    updateParentHeight();
});


new ResizeObserver(updateParentHeight).observe(document.body);


function initTTS() {
    console.log('Đang khởi tạo TTS');
    try {
        if (!responsiveVoice.voiceSupport()) {
            throw new Error('Trình duyệt không hỗ trợ TTS');
        }

        setupElements();
        loadContentToRead();
        setupEventListeners();
        
        const playButton = document.getElementById('playButton');
        if (playButton) {
            playButton.disabled = false;
        }
        
        ttsInitialized = true;
        console.log('TTS đã khởi tạo thành công');
        updateStatus('Sẵn sàng đọc');

    } catch (error) {
        console.error('Lỗi khởi tạo TTS:', error);
        showError(error.message);
    }
}


function setupElements() {
    const elements = ['playButton', 'voiceSelect', 'rateSelect', 'status', 'progress'];
    elements.forEach(id => {
        if (!document.getElementById(id)) {
            throw new Error(`Thiếu element: ${id}`);
        }
    });
}


function loadContentToRead() {
    const title = document.querySelector('.article-title');
    const contentElements = document.querySelectorAll('.article-content p, .article-content div > p, .article-content ul > li, .article-content ol > li');
    
    console.log('Title element:', title);
    console.log('Content elements:', contentElements);

    paragraphs = [];

    
    if (title) {
        paragraphs.push({
            element: title,
            text: title.textContent.trim()
        });
    }

    
    contentElements.forEach(element => {
        const text = element.textContent.trim();
        if (text.length > 0) {
            paragraphs.push({
                element: element,
                text: text
            });
        }
    });

    console.log('Total paragraphs loaded:', paragraphs.length);
    console.log('Paragraphs content:', paragraphs.map(p => p.text));
}


function setupEventListeners() {
    console.log('Setting up event listeners');

    
    const playButton = document.getElementById('playButton');
    const voiceSelect = document.getElementById('voiceSelect');
    const rateSelect = document.getElementById('rateSelect');
    const mp3Button = document.getElementById('mp3Button');

    if (playButton) {
        playButton.addEventListener('click', function(e) {
            e.preventDefault();
            console.log('TTS button clicked');
            toggleSpeech();
        });
    }

    if (voiceSelect) {
        voiceSelect.addEventListener('change', handleVoiceChange);
    }

    if (rateSelect) {
        rateSelect.addEventListener('change', handleRateChange);
    }

    if (mp3Button) {
        mp3Button.addEventListener('click', toggleMP3);
    }

    console.log('Event listeners setup complete');
}


function toggleMP3() {
    console.log('toggleMP3 called');

    const mp3Player = document.getElementById('mp3Player');
    const mp3Button = document.getElementById('mp3Button');

    console.log('MP3 Player:', mp3Player);
    console.log('MP3 Button:', mp3Button);
    console.log('Current MP3 state - paused:', mp3Player?.paused);

    if (!mp3Player || !mp3Button) {
        console.error('MP3 elements not found');
        return;
    }

    
    const pathParts = window.location.pathname.split('/');
    const newsId = pathParts[pathParts.length - 1].replace('.html', '');
    
    
    const mp3Path = `${newsId}.mp3`;

    console.log('MP3 Path:', mp3Path);

    
    const mp3Source = mp3Player.querySelector('source');
    if (!mp3Source?.src) {
        console.log('Setting MP3 source to:', mp3Path);
        mp3Source.src = mp3Path;
    }

    
    console.log('Current source:', mp3Source.src);

    
    mp3Player.style.display = 'block';

    if (mp3Player.paused) {
        console.log('Attempting to play MP3...');
        
        
        mp3Player.load();
        
        mp3Player.addEventListener('loadeddata', function onLoad() {
            console.log('MP3 loaded, attempting to play');
            mp3Player.removeEventListener('loadeddata', onLoad);
            
            
            mp3Player.play()
                .then(() => {
                    console.log('MP3 playing successfully');
                    isMP3Playing = true;
                    mp3Button.innerHTML = `
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <rect x="6" y="4" width="4" height="16"></rect>
                            <rect x="14" y="4" width="4" height="16"></rect>
                        </svg>
                        <span>Tạm dừng</span>`;
                })
                .catch(error => {
                    console.error('Error playing MP3:', error);
                    isMP3Playing = false;
                });
        });
    } else {
        console.log('Pausing MP3...');
        mp3Player.pause();
        isMP3Playing = false;
        mp3Button.innerHTML = `
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <path d="M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3z"/>
                <path d="M19 10v2a7 7 0 0 1-14 0v-2"/>
            </svg>
            <span>Audio đã thu</span>`;
    }
}




function checkMP3Source() {
   const mp3Player = document.getElementById('mp3Player');
   const source = document.getElementById('mp3Source');
   const mp3Button = document.getElementById('mp3Button');
   
   console.log('Checking MP3 source elements:');
   console.log('Audio element:', mp3Player);
   console.log('Source element:', source);
   console.log('Button element:', mp3Button);
   
   if (mp3Player && source) {
       console.log('Current source:', source.src);
       console.log('Audio ready state:', mp3Player.readyState);
       console.log('Audio paused state:', mp3Player.paused);
       console.log('Audio current time:', mp3Player.currentTime);
       console.log('Audio duration:', mp3Player.duration);

       
       const isValidSource = source.src && source.src.length > 0;
       console.log('Is valid source:', isValidSource);

       
       if (isValidSource) {
           const testAudio = new Audio();
           testAudio.src = source.src;
           
           testAudio.addEventListener('loadedmetadata', () => {
               console.log('MP3 file is accessible');
               mp3Button.disabled = false;
           });

           testAudio.addEventListener('error', () => {
               console.error('Error loading MP3 file');
               mp3Button.disabled = true;
               showError('Không thể tải file MP3');
           });
       } else {
           console.log('No MP3 source set');
           mp3Button.disabled = true;
       }

       
       const events = mp3Player.eventNames?.() || [];
       console.log('Bound events:', events);

       return {
           hasSource: isValidSource,
           readyState: mp3Player.readyState,
           isPaused: mp3Player.paused,
           currentTime: mp3Player.currentTime,
           duration: mp3Player.duration
       };
   } else {
       console.error('Required MP3 elements not found');
       return null;
   }
}


function setupMP3EventListeners() {
    const mp3Player = document.getElementById('mp3Player');
    const mp3Button = document.getElementById('mp3Button');

    if (mp3Player && mp3Button) {
        mp3Player.addEventListener('ended', function() {
            isMP3Playing = false;
            mp3Button.innerHTML = `
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <path d="M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3z"/>
                    <path d="M19 10v2a7 7 0 0 1-14 0v-2"/>
                </svg>
                <span>Audio đã thu</span>`;
        });
    }
}


function toggleSpeech() {
    console.log('toggleSpeech called, ttsInitialized:', ttsInitialized);
    console.log('isPlaying:', isPlaying);

    
    if (isMP3Playing) {
        const mp3Player = document.getElementById('mp3Player');
        const mp3Button = document.getElementById('mp3Button');
        
        mp3Player.pause();
        isMP3Playing = false;
        if (mp3Button) {
            mp3Button.innerHTML = `
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <path d="M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3z"/>
                    <path d="M19 10v2a7 7 0 0 1-14 0v-2"/>
                </svg>
                <span>Audio đã thu</span>`;
        }
    }

    if (!ttsInitialized) {
        showError('TTS chưa sẵn sàng');
        return;
    }

    if (!isPlaying) {
        startReading();
        isTTSPlaying = true;
    } else {
        stopReading();
        isTTSPlaying = false;
    }
}

function startReading() {
    console.log('Starting reading');
    isPlaying = true;
    currentParagraphIndex = 0;
    updateUI('reading');
    readNextParagraph();
}


function readNextParagraph() {
    console.log('Reading paragraph:', currentParagraphIndex + 1, 'of', paragraphs.length);
    console.log('isPlaying status:', isPlaying);

    if (currentParagraphIndex < paragraphs.length) {
        try {
            const voiceName = document.getElementById('voiceSelect').value;
            const rate = parseFloat(document.getElementById('rateSelect').value);
            const voiceConfig = TTS_CONFIG.VOICE_OPTIONS[voiceName];

            updateProgress(((currentParagraphIndex + 1) / paragraphs.length) * 100);
            highlightParagraph(currentParagraphIndex);

            console.log('Current text:', paragraphs[currentParagraphIndex].text);

            responsiveVoice.speak(
                paragraphs[currentParagraphIndex].text,
                voiceName,
                {
                    pitch: voiceConfig.pitch,
                    rate: rate,
                    volume: voiceConfig.volume,
                    lang: voiceConfig.lang,
                    onstart: function() {
                        console.log(`Bắt đầu đọc đoạn ${currentParagraphIndex + 1}/${paragraphs.length}`);
                        updateStatus(`Đang đọc đoạn ${currentParagraphIndex + 1}/${paragraphs.length}`);
                    },
                    onend: function() {
                        console.log(`Kết thúc đọc đoạn ${currentParagraphIndex + 1}`);
                        unhighlightParagraph(currentParagraphIndex);
                        currentParagraphIndex++;

                        
                        if (isPlaying && currentParagraphIndex < paragraphs.length) {
                            console.log('Moving to next paragraph after delay');
                            setTimeout(readNextParagraph, TTS_CONFIG.PAUSE_BETWEEN);
                        } else if (currentParagraphIndex >= paragraphs.length) {
                            console.log('Reached end of content');
                            finishReading();
                        }
                    }
                }
            );
        } catch (error) {
            console.error('Error reading paragraph:', error);
            showError(error.message);
            stopReading();
        }
    } else {
        console.log('No more paragraphs to read');
        finishReading();
    }
}


function stopReading() {
    console.log('Stopping reading');
    responsiveVoice.cancel();
    isPlaying = false;
    isTTSPlaying = false;
    unhighlightAll();
    updateUI('paused');
}


function finishReading() {
    console.log('Finishing reading');
    isPlaying = false;
    isTTSPlaying = false;
    updateProgress(100);
    updateUI('finished');
    unhighlightAll();
}


function highlightParagraph(index) {
    if (paragraphs[index]) {
        paragraphs[index].element.classList.add('current');
        scrollToParagraph(paragraphs[index].element);
    }
}


function unhighlightParagraph(index) {
    if (paragraphs[index]) {
        paragraphs[index].element.classList.remove('current');
    }
}


function unhighlightAll() {
    paragraphs.forEach(p => p.element.classList.remove('current'));
}

function scrollToParagraph(element) {
    element.scrollIntoView({
        behavior: 'smooth',
        block: 'center'
    });
}


function updateUI(state) {
    const button = document.getElementById('playButton');
    if (button) {
        button.innerHTML = isPlaying ? 
            `<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <rect x="6" y="4" width="4" height="16"></rect>
                <rect x="14" y="4" width="4" height="16"></rect>
            </svg>
            <span>Tạm dừng</span>` :
            `<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <polygon points="5 3 19 12 5 21 5 3"></polygon>
            </svg>
            <span>Đọc bài viết</span>`;
    }
    updateStatus(state);
}

// Update status
function updateStatus(state) {
    const status = document.getElementById('status');
    const statusText = document.getElementById('statusText');
    if (status && statusText) {
        status.className = 'status active ' + state;
        statusText.textContent = typeof state === 'string' ? state : 
            state === 'reading' ? 'Đang đọc...' :
            state === 'paused' ? 'Đã tạm dừng' :
            state === 'finished' ? 'Đã đọc xong' : '';
    }
}


function updateProgress(percent) {
    const progress = document.getElementById('progress');
    if (progress) {
        progress.style.width = percent + '%';
    }
}


function handleVoiceChange() {
    if (isPlaying) {
        restartReading();
    }
}


function handleRateChange() {
    if (isPlaying) {
        restartReading();
    }
}


function restartReading() {
    stopReading();
    startReading();
}


function showError(message) {
    console.error(message);
    const statusText = document.getElementById('statusText');
    const status = document.getElementById('status');
    if (statusText && status) {
        statusText.textContent = message;
        status.className = 'status active error';
    }
}


function updateParentHeight() {
    const height = document.documentElement.scrollHeight;
    window.parent.postMessage({ height: height }, '*');
}


function shareOnFacebook() {
    const url = window.location.href;
    window.open('https://www.facebook.com/sharer/sharer.php?u=' + encodeURIComponent(url));
}

function shareOnTwitter() {
    const url = window.location.href;
    const title = document.title;
    window.open('https://twitter.com/intent/tweet?url=' + encodeURIComponent(url) + '&text=' + encodeURIComponent(title));
}
</script>
</body>
</html>