
<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Làm sao để biết vết thương bị nhiễm trùng? - Tin Tức Y Khoa</title>
    
    <script src="https://code.responsivevoice.org/responsivevoice.js?key=30xj8le1"></script>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            background: #f5f5f5;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .article-category {
            display: inline-block;
            background: #0070c0;
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9em;
            margin-bottom: 15px;
        }

        h1 {
            font-size: 2em;
            margin-bottom: 15px;
            line-height: 1.2;
            color: #333;
        }

        .article-meta {
            color: #666;
            font-size: 0.9em;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 15px;
            flex-wrap: wrap;
        }

        .reading-time {
            display: inline-flex;
            align-items: center;
            gap: 5px;
            padding: 3px 8px;
            background: #f0f0f0;
            border-radius: 15px;
        }

        .featured-image {
            width: 100%;
            height: auto;
            max-height: 500px;
            object-fit: cover;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .article-content {
            background: white;
            padding: 30px;
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .article-content p {
            margin-bottom: 15px;
            line-height: 1.8;
            padding: 10px;
            border-radius: 4px;
            transition: all 0.3s ease;
        }

        .article-content p.current {
            background: #f0f9ff;
            border-left: 3px solid #0070c0;
            padding-left: 15px;
        }

        .article-content img {
            max-width: 100%;
            height: auto;
            margin: 20px 0;
            border-radius: 4px;
        }

         
        .speech-controls {
            margin: 20px 0;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 8px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }

        .speech-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 15px;
        }

        .speech-title {
            font-size: 1.1em;
            font-weight: bold;
            color: #333;
        }

        .controls-container {
            display: flex;
            align-items: center;
            gap: 20px;
            flex-wrap: wrap;
        }

        .control-button {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px 20px;
            background: #0070c0;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        #playButton {
            background: #0070c0;
        }

        #mp3Button {
            background: #28a745;
        }

        .control-button:hover {
            opacity: 0.9;
            transform: translateY(-1px);
        }

        .control-button:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }

        .speed-control {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        select {
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            background: white;
            min-width: 120px;
        }

        .progress-container {
            margin-top: 15px;
            background: #e9ecef;
            height: 4px;
            border-radius: 2px;
            overflow: hidden;
        }

        .progress-bar {
            height: 100%;
            background: #0070c0;
            width: 0;
            transition: width 0.3s;
        }

        .status {
            padding: 10px 15px;
            margin: 10px 0;
            border-radius: 4px;
            display: none;
            font-size: 0.9em;
        }

        .status.active {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .status.reading {
            background: #e3f2fd;
            color: #0070c0;
            border-left: 4px solid #0070c0;
        }

        .status.paused {
            background: #fff3e0;
            color: #ef6c00;
            border-left: 4px solid #ef6c00;
        }

        .status.error {
            background: #ffebee;
            color: #c62828;
            border-left: 4px solid #c62828;
        }

         
        .audio-player {
            width: 100%;
            margin-top: 10px;
            display: none;
        }

        .audio-player.active {
            display: block;
        }

         
        .share-section {
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid #eee;
        }

        .share-buttons {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }

        .share-button {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            border: none;
            border-radius: 4px;
            color: white;
            cursor: pointer;
            font-size: 14px;
            transition: opacity 0.3s;
        }

        .share-button:hover {
            opacity: 0.9;
        }

        .share-button.facebook {
            background: #1877f2;
        }

        .share-button.twitter {
            background: #1da1f2;
        }

         
        .related-section {
            margin-top: 40px;
        }

        .related-title {
            font-size: 1.5em;
            margin-bottom: 20px;
            color: #333;
        }

        .related-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
        }

        .related-article {
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            transition: transform 0.3s;
        }

        .related-article:hover {
            transform: translateY(-3px);
        }

        .related-article img {
            width: 100%;
            height: 180px;
            object-fit: cover;
        }

        .related-article h3 {
            padding: 15px;
            margin: 0;
        }

        .related-article a {
            color: #333;
            text-decoration: none;
        }

        .related-article a:hover {
            color: #0070c0;
        }

        .related-article .date {
            display: block;
            padding: 0 15px 15px;
            color: #666;
            font-size: 0.9em;
        }

        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }

            h1 {
                font-size: 1.8em;
            }

            .article-meta {
                flex-direction: column;
                align-items: flex-start;
            }

            .controls-container {
                flex-direction: column;
                align-items: stretch;
            }

            .related-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <span class="article-category">Sản Phụ Khoa</span>
        
        <h1>Làm sao để biết vết thương bị nhiễm trùng?</h1>
        
        <div class="article-meta">
            <span>Đăng ngày 19/12/2024</span>
            <span class="reading-time">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="10"></circle>
                    <polyline points="12 6 12 12 16 14"></polyline>
                </svg>
                5 phút đọc
            </span>
        </div>

        <img src="https://www.drgrazer.com/wp-content/uploads/2020/07/post-surgical-scarring.jpg" alt="Làm sao để biết vết thương bị nhiễm trùng?" class="featured-image">

        <div class="article-content">
            <div class="speech-controls">
                <div class="speech-header">
                    <span class="speech-title">Nghe bài viết</span>
                </div>
                
                <div class="controls-container">
                    
                    <button id="mp3Button" class="control-button" style="display: none;">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <path d="M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3z"/>
                            <path d="M19 10v2a7 7 0 0 1-14 0v-2"/>
                            <line x1="12" y1="19" x2="12" y2="23"/>
                            <line x1="8" y1="23" x2="16" y2="23"/>
                        </svg>
                        Audio đã thu
                    </button>

                    
                    <button id="playButton" class="control-button" disabled>
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <polygon points="5 3 19 12 5 21 5 3"></polygon>
                        </svg>
                        Đọc bài viết
                    </button>
                    
                    <div class="speed-control">
                        <select id="voiceSelect">
                            <option value="Vietnamese Female">Giọng Nữ</option>
                            <option value="Vietnamese Male">Giọng Nam</option>
                        </select>
                        <label for="rateSelect">Tốc độ đọc:</label>
                        <select id="rateSelect">
                            <option value="0.8">Chậm</option>
                            <option value="1" selected>Bình thường</option>
                            <option value="1.2">Nhanh</option>
                        </select>
                    </div>
                </div>

                
                <audio id="audioPlayer" class="audio-player">
                    <source id="audioSource" type="audio/mpeg">
                    Trình duyệt không hỗ trợ phát audio.
                </audio>

                <div class="progress-container">
                    <div id="progress" class="progress-bar"></div>
                </div>

                <div id="status" class="status">
                    <span id="statusText"></span>
                </div>
            </div>

            <h1><span style="background-color: transparent; color: rgb(6, 28, 67);">3 cách để biết sự khác biệt giữa vết thương phẫu thuật đang lành và bị nhiễm trùng</span></h1><p><span style="background-color: transparent;">Sẹo sau phẫu thuật là một trong những mối quan tâm cấp bách nhất của nhiều bệnh nhân phẫu thuật thẩm mỹ tiềm năng trước khi thực hiện thủ thuật mà họ đã chọn. Sự do dự này là dễ hiểu.</span></p><p><span style="background-color: transparent;">Mọi người chọn phẫu thuật thẩm mỹ để cải thiện ngoại hình. Điều này thường xảy ra với các ca phẫu thuật nâng cao khuôn mặt, chẳng hạn </span><a href="https://www-drgrazer-com.translate.goog/procedure/facelift/?_x_tr_sl=vi&amp;_x_tr_tl=en&amp;_x_tr_hl=en&amp;_x_tr_pto=wapp" target="_blank" style="background-color: transparent; color: rgb(0, 0, 0);">như phẫu thuật căng da mặt</a><span style="background-color: transparent;"> hoặc </span><a href="https://www-drgrazer-com.translate.goog/procedure/brow-lift/?_x_tr_sl=vi&amp;_x_tr_tl=en&amp;_x_tr_hl=en&amp;_x_tr_pto=wapp" target="_blank" style="background-color: transparent; color: rgb(0, 0, 0);">phẫu thuật nâng cung mày</a><span style="background-color: transparent;"> , hoặc các thủ thuật tạo đường nét cơ thể như </span><a href="https://www-drgrazer-com.translate.goog/procedure/tummy-tuck-abdominoplasty/?_x_tr_sl=vi&amp;_x_tr_tl=en&amp;_x_tr_hl=en&amp;_x_tr_pto=wapp" target="_blank" style="background-color: transparent; color: rgb(0, 0, 0);">phẫu thuật căng da bụng</a><span style="background-color: transparent;"> , </span><a href="https://www-drgrazer-com.translate.goog/procedure/plastic-surgery-after-major-weight-loss/?_x_tr_sl=vi&amp;_x_tr_tl=en&amp;_x_tr_hl=en&amp;_x_tr_pto=wapp" target="_blank" style="background-color: transparent; color: rgb(0, 0, 0);">loại bỏ da sau khi giảm cân nhiều</a><span style="background-color: transparent;"> hoặc </span><a href="https://www-drgrazer-com.translate.goog/procedure/liposuction/?_x_tr_sl=vi&amp;_x_tr_tl=en&amp;_x_tr_hl=en&amp;_x_tr_pto=wapp" target="_blank" style="background-color: transparent; color: rgb(0, 0, 0);">phẫu thuật hút mỡ</a><span style="background-color: transparent;"> . Và thật không may, sẹo không hề hấp dẫn về mặt thẩm mỹ.</span></p><p><span style="background-color: transparent;">Vậy, có thể làm gì với những vết không mong muốn này?</span></p><p><span style="background-color: transparent;">Thật đáng buồn, câu trả lời là không nhiều. Các bác sĩ phẫu thuật thẩm mỹ sẽ làm mọi cách có thể để rạch ở những vùng kín đáo trên cơ thể và vì các bác sĩ phẫu thuật thẩm mỹ có tay nghề cao trong việc đóng và khâu vết thương nên hầu hết các vết sẹo phẫu thuật thẩm mỹ đều lành tốt.</span></p><p><span style="background-color: transparent;">Thật không may, bất kỳ vết rạch nào cũng sẽ để lại sẹo, và thật đáng buồn là một số bệnh nhân dễ bị sẹo hơn những người khác.</span></p><p><span style="background-color: transparent;">Mặc dù sẹo phẫu thuật thẩm mỹ sẽ mờ dần theo thời gian, nhưng chúng vẫn cần được chăm sóc và theo dõi cẩn thận, vì sẹo xấu thường là kết quả của việc sẹo lành không đúng cách.</span></p><h2><em style="background-color: transparent; color: rgb(6, 28, 67);">Tại sao sẹo phẫu thuật lại hình thành?</em></h2><p><span style="background-color: transparent;">Khi quá trình lành thương diễn ra sau phẫu thuật thẩm mỹ, sẽ có những thay đổi rõ rệt xảy ra với da (trên và gần vết thương). Quá trình lành thương khác nhau tùy thuộc vào loại và mức độ của quy trình. Ví dụ, trong </span><a href="https://www-drgrazer-com.translate.goog/procedure/tummy-tuck-abdominoplasty/?_x_tr_sl=vi&amp;_x_tr_tl=en&amp;_x_tr_hl=en&amp;_x_tr_pto=wapp" target="_blank" style="background-color: transparent; color: rgb(0, 0, 0);">quy trình căng da bụng</a><span style="background-color: transparent;"> , căng da bụng mini sẽ cần ít thời gian phục hồi hơn so với căng da bụng mở rộng.</span></p><p><span style="background-color: transparent;">Để vết thương lành lại đúng cách, hãy luôn làm theo hướng dẫn của Bác sĩ Grazer và chú ý đến vết mổ phẫu thuật thẩm mỹ để đảm bảo vết thương của bạn lành lại như bình thường.</span></p><p><span style="background-color: transparent;">Điều quan trọng là phải hiểu những gì sẽ xảy ra trong quá trình phục hồi và nhận thức được bạn đang ở giai đoạn nào trong quá trình chữa bệnh để giúp quá trình hồi phục của bạn dễ dàng và an toàn hơn.</span></p><h2><em style="background-color: transparent; color: rgb(6, 28, 67);">Dấu hiệu nào cho thấy vết thương của bạn đang lành đúng cách?</em></h2><p><span style="background-color: transparent;">Nhờ hệ thống miễn dịch, cơ thể chúng ta có khả năng tự chữa lành đáng kinh ngạc. Việc chữa lành vết thương diễn ra theo các giai đoạn riêng biệt, bao gồm chảy máu và đông máu, sau đó là hình thành vảy.</span></p><p><span style="background-color: transparent;">Mặc dù bạn có thể bị sưng, viêm, đau và tiết dịch trong sau khi phẫu thuật thẩm mỹ, bạn không cần phải lo lắng trừ khi tình trạng nghiêm trọng. Khi vết thương lành lại, mô sẹo mới bắt đầu phát triển trên vết thương, sau đó bạn có thể tiếp tục các hoạt động hàng ngày.</span></p><p><span style="background-color: transparent;">Bạn có thể tự hỏi liệu những gì bạn đang trải qua có bình thường không hay có điều gì đó không ổn. Sau đây là một số dấu hiệu cảnh báo cần chú ý.</span></p><h3><em style="background-color: transparent; color: rgb(6, 28, 67);">1. Chất lỏng</em></h3><p><span style="background-color: transparent;">Khi vết thương của bạn lành lại, bạn sẽ thấy một ít dịch lỏng chảy ra từ vùng rạch. Điều này hoàn toàn bình thường và thường xảy ra trong hai đến ba ngày đầu sau thủ thuật.</span></p><p><span style="background-color: transparent;">Nếu có dịch tiết màu xanh lục, vàng hoặc đục chảy ra từ vị trí phẫu thuật, vết mổ đang lành có thể bị nhiễm trùng và bạn cần liên hệ với bác sĩ phẫu thuật càng sớm càng tốt.</span></p><h3><em style="background-color: transparent; color: rgb(6, 28, 67);">2. Đỏ</em></h3><p><span style="background-color: transparent;">Một số mức độ đỏ và đau là bình thường sau khi phẫu thuật. Tuy nhiên, tình trạng đỏ cực độ lan rộng thành các họa tiết mạng nhện, sợi chỉ bên ngoài vết thương có thể chỉ ra khả năng nhiễm trùng. Liên hệ với bác sĩ phẫu thuật để giúp bạn tránh các biến chứng tiếp theo.</span></p><h3><em style="background-color: transparent; color: rgb(6, 28, 67);">3. Da gồ lên</em></h3><p><span style="background-color: transparent;">Lý tưởng nhất là vết thương đang lành phải tương đối phẳng. Nếu không, đó có thể là dấu hiệu cho thấy có thứ gì đó không lành đúng cách.</span></p><p><span style="background-color: transparent;">Một trường hợp điển hình là </span><a href="https://www-drgrazer-com.translate.goog/procedure/breast-augmentation/?_x_tr_sl=vi&amp;_x_tr_tl=en&amp;_x_tr_hl=en&amp;_x_tr_pto=wapp" target="_blank" style="background-color: transparent; color: rgb(0, 0, 0);">vết rạch sau phẫu thuật nâng ngực</a><span style="background-color: transparent;"> vẫn đỏ và sưng trong nhiều tuần.</span></p><p><span style="background-color: transparent;">Vết thương bị nhiễm trùng sẽ khiến các hạch bạch huyết to ra và cứng lại, đặc biệt là gần vị trí phẫu thuật.</span></p><p><span style="background-color: transparent;">Để phòng ngừa, điều quan trọng là phải liên hệ với bác sĩ phẫu thuật để họ kiểm tra vị trí phẫu thuật và xét nghiệm dịch xung quanh túi độn để tìm dấu hiệu của vi khuẩn.</span></p><p><span style="background-color: transparent;">Thật không may, một số vết thương trở thành sẹo phì đại hoặc </span><a href="https://www-drgrazer-com.translate.goog/blog/how-to-treat-keloid-scars/?_x_tr_sl=vi&amp;_x_tr_tl=en&amp;_x_tr_hl=en&amp;_x_tr_pto=wapp" target="_blank" style="background-color: transparent; color: rgb(0, 0, 0);">biến thành sẹo lồi</a><span style="background-color: transparent;"> , là những tổn thương dày và lồi lên phát triển tại vị trí chấn thương (như vết thương phẫu thuật). Những vết sẹo này đôi khi là không thể tránh khỏi; tuy nhiên, chúng có thể tránh được nếu chăm sóc sẹo đầy đủ trong quá trình lành vết thương.</span></p><p><br></p>
            <div class="share-section">
                <div class="share-buttons">
                    <button onclick="shareOnFacebook()" class="share-button facebook">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"></path>
                        </svg>
                        Chia sẻ Facebook
                    </button>
                    <button onclick="shareOnTwitter()" class="share-button twitter">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"></path>
                        </svg>
                        Chia sẻ Twitter
                    </button>
                </div>
            </div>
        </div>

        <div class="related-section">
            <h2 class="related-title">Bài viết liên quan</h2>
            <div class="related-grid">
                
     <div class="related-article">
       <img src="https://www.drgrazer.com/wp-content/uploads/2020/07/post-surgical-scarring.jpg" alt="Làm sao để biết vết thương bị nhiễm trùng?">
       <h3>
         <a href="NEWS_20241219195539.html">Làm sao để biết vết thương bị nhiễm trùng?</a>
       </h3>
       <span class="date">19/12/2024</span>
     </div>
   
     <div class="related-article">
       <img src="https://marylandoncology.com/wp-content/uploads/2023/12/MOH-Feature-1.jpg" alt="Dinh dưỡng trong điều trị ung thư: Hướng dẫn toàn diện cho bệnh nhân và người chăm sóc">
       <h3>
         <a href="NEWS_20241217200433.html">Dinh dưỡng trong điều trị ung thư: Hướng dẫn toàn diện cho bệnh nhân và người chăm sóc</a>
       </h3>
       <span class="date">17/12/2024</span>
     </div>
   
     <div class="related-article">
       <img src="https://www.breastsurgeryireland.com/3d-images/inflammatory-breast-cancer.jpg" alt="Ung thư vú viêm">
       <h3>
         <a href="NEWS_20241217182729.html">Ung thư vú viêm</a>
       </h3>
       <span class="date">17/12/2024</span>
     </div>
               </div>
        </div>
    </div>

    <script>
        
        const VOICE_CONFIG = {
            'Vietnamese Female': {
                name: 'Vietnamese Female',
                lang: 'vi-VN',
                voiceURI: 'Vietnamese Female',
                rate: 1,
                pitch: 1.1,
               volume: 1
           },
           'Vietnamese Male': {
               name: 'Vietnamese Male', 
               lang: 'vi-VN',
               voiceURI: 'Vietnamese Male',
               rate: 1,
               pitch: 0.9,
               volume: 1
           }
       };

       
       let isPlaying = false;
       let currentParagraphIndex = 0;
       let paragraphs = [];
       let ttsInitialized = false;
       let hasMP3 = false;

       
       if (typeof responsiveVoice !== 'undefined') {
           responsiveVoice.OnVoiceReady = function() {
               console.log('ResponsiveVoice sẵn sàng');
               initTTS();
               checkForMP3();
           };
       }

       
       function initTTS() {
           try {
               if (!responsiveVoice.voiceSupport()) {
                   throw new Error('Trình duyệt không hỗ trợ TTS');
               }

               setupElements();
               setupEventListeners();
               loadParagraphs();
               
               document.getElementById('playButton').disabled = false;
               ttsInitialized = true;
               
               console.log('TTS đã khởi tạo thành công');
               updateStatus('Sẵn sàng đọc');

           } catch (error) {
               showError('Không thể khởi tạo TTS: ' + error.message);
           }
       }

       
function checkForMP3() {
    const audio = document.createElement('audio');
    const mp3Path = getMP3Path();
    
    
    audio.addEventListener('canplaythrough', function() {
        hasMP3 = true;
        setupMP3Player(mp3Path);
    });

    audio.addEventListener('error', function() {
        console.log('Không tìm thấy file MP3');
        hasMP3 = false;
    });

    
    audio.src = mp3Path;
    audio.load();
}

function getMP3Path() {
    
    const pathParts = window.location.pathname.split('/');
    const newsId = pathParts[pathParts.length - 1].replace('.html', '');
    
    
    const mp3Path = `${newsId}.mp3`;
    
    return mp3Path;
}

       
       function setupMP3Player(mp3Path) {
    try {
        const mp3Button = document.getElementById('mp3Button');
        const audioPlayer = document.getElementById('audioPlayer');

        
        if (mp3Button && audioPlayer) {
            mp3Button.style.display = 'flex';
            audioPlayer.querySelector('source').src = mp3Path;
            audioPlayer.load();

            mp3Button.addEventListener('click', toggleMP3);
            audioPlayer.addEventListener('timeupdate', updateMP3Progress);
            audioPlayer.addEventListener('ended', resetMP3);
            
            console.log('Đã thiết lập MP3 Player');
        }
    } catch (error) {
        console.error('Lỗi thiết lập MP3 Player:', error);
    }
}

       
       function toggleMP3() {
           const audioPlayer = document.getElementById('audioPlayer');
           const mp3Button = document.getElementById('mp3Button');

           if (isPlaying) {
               stopReading(); 
           }

           if (audioPlayer.paused) {
               audioPlayer.play();
               mp3Button.innerHTML = `
                   <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                       <rect x="6" y="4" width="4" height="16"></rect>
                       <rect x="14" y="4" width="4" height="16"></rect>
                   </svg>
                   Tạm dừng Audio`;
           } else {
               audioPlayer.pause();
               resetMP3();
           }
       }

       // Update MP3 Progress
       function updateMP3Progress() {
           const audioPlayer = document.getElementById('audioPlayer');
           const progress = (audioPlayer.currentTime / audioPlayer.duration) * 100;
           document.getElementById('progress').style.width = progress + '%';
       }

       
       function resetMP3() {
           const mp3Button = document.getElementById('mp3Button');
           mp3Button.innerHTML = `
               <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                   <path d="M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3z"/>
                   <path d="M19 10v2a7 7 0 0 1-14 0v-2"/>
                   <line x1="12" y1="19" x2="12" y2="23"/>
                   <line x1="8" y1="23" x2="16" y2="23"/>
               </svg>
               Audio đã thu`;
           document.getElementById('progress').style.width = '0%';
       }

       // Setup elements
       function setupElements() {
           const elements = ['playButton', 'voiceSelect', 'rateSelect', 'status', 'progress'];
           elements.forEach(id => {
               if (!document.getElementById(id)) {
                   throw new Error(`Thiếu element: ${id}`);
               }
           });
       }

       
       function setupEventListeners() {
           document.getElementById('playButton').addEventListener('click', toggleSpeech);
           document.getElementById('voiceSelect').addEventListener('change', handleVoiceChange);
           document.getElementById('rateSelect').addEventListener('change', handleRateChange);
       }

       
       function loadParagraphs() {
           paragraphs = Array.from(document.querySelectorAll('.article-content p'))
                           .map(p => p.textContent.trim())
                           .filter(text => text.length > 0);
           console.log(`Tìm thấy ${paragraphs.length} đoạn văn`);
       }

       
       function toggleSpeech() {
           if (!ttsInitialized) {
               showError('TTS chưa sẵn sàng');
               return;
           }

           if (!isPlaying) {
               startReading();
           } else {
               stopReading();
           }
       }

       
       function startReading() {
           isPlaying = true;
           currentParagraphIndex = 0;
           updateUI('reading');
           readNextParagraph();
       }

       
       function readNextParagraph() {
           if (currentParagraphIndex < paragraphs.length) {
               try {
                   const voiceName = document.getElementById('voiceSelect').value;
                   const voiceConfig = VOICE_CONFIG[voiceName];
                   const rate = parseFloat(document.getElementById('rateSelect').value);

                   updateProgress(((currentParagraphIndex + 1) / paragraphs.length) * 100);
                   highlightCurrentParagraph(true);

                   responsiveVoice.speak(
                       paragraphs[currentParagraphIndex],
                       voiceName,
                       {
                           pitch: voiceConfig.pitch,
                           rate: rate,
                           volume: voiceConfig.volume,
                           lang: voiceConfig.lang,
                           voiceURI: voiceConfig.voiceURI,
                           onstart: function() {
                               console.log(`Đọc đoạn ${currentParagraphIndex + 1}/${paragraphs.length}`);
                               updateStatus(`Đang đọc đoạn ${currentParagraphIndex + 1}/${paragraphs.length}`);
                           },
                           onend: function() {
                               highlightCurrentParagraph(false);
                               currentParagraphIndex++;
                               if (isPlaying) {
                                   setTimeout(readNextParagraph, 100);
                               }
                           }
                       }
                   );
               } catch (error) {
                   console.error('Error:', error);
                   showError(error.message);
                   stopReading();
               }
           } else {
               finishReading();
           }
       }

       
       function stopReading() {
           responsiveVoice.cancel();
           isPlaying = false;
           highlightCurrentParagraph(false);
           updateUI('paused');
       }

       
       function finishReading() {
           isPlaying = false;
           updateProgress(100);
           updateUI('finished');
           console.log('Hoàn thành đọc bài viết');
       }

       
       function handleVoiceChange() {
           if (isPlaying) {
               restartReading();
           }
       }

       
       function handleRateChange() {
           if (isPlaying) {
               restartReading();
           }
       }

       
       function restartReading() {
           stopReading();
           startReading();
       }

       
       function updateUI(state) {
           const button = document.getElementById('playButton');
           if (button) {
               button.innerHTML = isPlaying ? 
                   '<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"><rect x="6" y="4" width="4" height="16"></rect><rect x="14" y="4" width="4" height="16"></rect></svg>Tạm dừng' :
                   '<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg>Đọc bài viết';
           }
           updateStatus(state);
       }

       
       function updateStatus(message) {
           const statusText = document.getElementById('statusText');
           const status = document.getElementById('status');
           if (statusText && status) {
               statusText.textContent = typeof message === 'string' ? message : 
                   message === 'reading' ? 'Đang đọc...' :
                   message === 'paused' ? 'Đã tạm dừng' :
                   message === 'finished' ? 'Đã đọc xong' : '';
               status.className = 'status active ' + message;
           }
       }

       
       function updateProgress(percent) {
           const progress = document.getElementById('progress');
           if (progress) {
               progress.style.width = percent + '%';
           }
       }

       
       function highlightCurrentParagraph(isHighlight) {
           const paragraphElements = document.querySelectorAll('.article-content p');
           paragraphElements.forEach(p => p.classList.remove('current'));
           
           if (isHighlight && paragraphElements[currentParagraphIndex]) {
               paragraphElements[currentParagraphIndex].classList.add('current');
               paragraphElements[currentParagraphIndex].scrollIntoView({
                   behavior: 'smooth',
                   block: 'center'
               });
           }
       }

       
       function showError(message) {
           console.error(message);
           updateStatus('error');
           const statusText = document.getElementById('statusText');
           if (statusText) {
               statusText.textContent = message;
           }
       }

       
       function shareOnFacebook() {
           const url = window.location.href;
           window.open('https://www.facebook.com/sharer/sharer.php?u=' + encodeURIComponent(url));
       }

       function shareOnTwitter() {
           const url = window.location.href;
           const title = document.title;
           window.open('https://twitter.com/intent/tweet?url=' + encodeURIComponent(url) + '&text=' + encodeURIComponent(title));
       }

       
       function updateParentHeight() {
           const height = document.documentElement.scrollHeight;
           window.parent.postMessage({ height: height }, '*');
       }

       
       document.addEventListener('DOMContentLoaded', function() {
           updateParentHeight();
       });

       
       new ResizeObserver(updateParentHeight).observe(document.body);
   </script>
</body>
</html>