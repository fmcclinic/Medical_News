<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Phòng ngừa ung thư cổ tử cung: - Tin Tức Y Khoa</title>
    
<script src="https://code.responsivevoice.org/responsivevoice.js?key=30xj8le1"></script>
        
  <script>
function waitForResponsiveVoice() {
    return new Promise((resolve, reject) => {
        let attempts = 0;
        const checkResponsiveVoice = setInterval(() => {
            attempts++;
            if (window.responsiveVoice && window.responsiveVoice.voiceSupport()) {
                clearInterval(checkResponsiveVoice);
                resolve();
            } else if (attempts > 50) { 
                clearInterval(checkResponsiveVoice);
                reject(new Error('ResponsiveVoice không load được'));
            }
        }, 100);
    });
}
    </script>


        <style>
         
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            background: #f5f5f5;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            flex: 1;
        }

         
        .article-category {
            display: inline-block;
            background: #0070c0;
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9em;
            margin-bottom: 15px;
        }

        .article-title {
            font-size: 2em;
            margin-bottom: 15px;
            line-height: 1.2;
            color: #333;
            padding: 10px;
        }

        .article-meta {
            color: #666;
            font-size: 0.9em;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 15px;
            flex-wrap: wrap;
        }

        .reading-time {
            display: inline-flex;
            align-items: center;
            gap: 5px;
            padding: 3px 8px;
            background: #f0f0f0;
            border-radius: 15px;
        }

         
        .article-content {
            background: white;
            padding: 30px;
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .featured-image {
            width: 100%;
            height: auto;
            max-height: 500px;
            object-fit: cover;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .article-content p {
            margin-bottom: 15px;
            line-height: 1.8;
            padding: 10px;
            border-radius: 4px;
            transition: all 0.3s ease;
        }

        .article-content p.current,
        .article-title.current {
            background: #f0f9ff;
            border-left: 3px solid #0070c0;
            padding-left: 15px;
        }

         
        .speech-controls {
            margin: 20px 0;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 8px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }

        .speech-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 15px;
        }

        .speech-title {
            font-size: 1.1em;
            font-weight: bold;
            color: #333;
        }

        .controls-container {
            display: flex;
            align-items: center;
            gap: 20px;
            flex-wrap: wrap;
        }

        .control-button {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px 20px;
            background: #0070c0;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .control-button:hover {
            opacity: 0.9;
            transform: translateY(-1px);
        }

        .control-button:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }

        .speed-control {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        select {
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            background: white;
            min-width: 120px;
        }

        .progress-container {
            margin-top: 15px;
            background: #e9ecef;
            height: 4px;
            border-radius: 2px;
            overflow: hidden;
        }

        .progress-bar {
            height: 100%;
            background: #0070c0;
            width: 0;
            transition: width 0.3s;
        }

        .status {
            padding: 10px 15px;
            margin: 10px 0;
            border-radius: 4px;
            display: none;
        }

        .status.active {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .status.reading {
            background: #e3f2fd;
            color: #0070c0;
            border-left: 4px solid #0070c0;
        }

        .status.paused {
            background: #fff3e0;
            color: #ef6c00;
            border-left: 4px solid #ef6c00;
        }

        .status.error {
            background: #ffebee;
            color: #c62828;
            border-left: 4px solid #c62828;
        }

         
        .related-section {
            margin-top: 40px;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .related-title {
            font-size: 1.5em;
            margin-bottom: 20px;
            color: #333;
        }

        .related-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
        }

        .related-article {
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            transition: transform 0.3s;
            height: 100%;
            display: flex;
            flex-direction: column;
        }

        .related-article:hover {
            transform: translateY(-3px);
        }

        .related-article img {
            width: 100%;
            height: 180px;
            object-fit: cover;
        }

        .related-article h3 {
            padding: 15px;
            margin: 0;
            flex: 1;
        }

        .related-article a {
            color: #333;
            text-decoration: none;
        }

        .related-article a:hover {
            color: #0070c0;
        }

        .related-article .date {
            display: block;
            padding: 0 15px 15px;
            color: #666;
            font-size: 0.9em;
        }

         
        .share-section {
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid #eee;
        }

        .share-buttons {
            display: flex;
            gap: 10px;
        }

        .share-button {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            border: none;
            border-radius: 4px;
            color: white;
            cursor: pointer;
            font-size: 14px;
            transition: opacity 0.3s;
        }

        .share-button:hover {
            opacity: 0.9;
        }

        .share-button.facebook {
            background: #1877f2;
        }

        .share-button.twitter {
            background: #1da1f2;
        }

         
        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }

            .article-title {
                font-size: 1.8em;
            }

            .article-meta {
                flex-direction: column;
                align-items: flex-start;
            }

            .controls-container {
                flex-direction: column;
                align-items: stretch;
            }

            .related-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <span class="article-category">Sản Phụ Khoa</span>
        
        <h1 class="article-title">Phòng ngừa ung thư cổ tử cung:</h1>
        
        <div class="article-meta">
            <span>Đăng ngày 16/12/2024</span>
            <span class="reading-time">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="10"></circle>
                    <polyline points="12 6 12 12 16 14"></polyline>
                </svg>
                7 phút đọc
            </span>
        </div>

        <img src="https://thumbayuniversityhospital.com/wp-content/uploads/2021/07/papsmear.jpg" alt="Phòng ngừa ung thư cổ tử cung:" class="featured-image">

        <div class="article-content">



<div class="speech-controls">
    <div class="speech-header">
        <span class="speech-title">Nghe bài viết</span>
    </div>
    
    <div class="controls-container">
        
        <button id="mp3Button" class="control-button" onclick="toggleMP3()">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <path d="M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3z"/>
                <path d="M19 10v2a7 7 0 0 1-14 0v-2"/>
            </svg>
            <span>Audio đã thu</span>
        </button>

        
        <button id="playButton" class="control-button">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <polygon points="5 3 19 12 5 21 5 3"></polygon>
            </svg>
            <span>Đọc bài viết</span>
        </button>
        
        
        <div class="speed-control">
            <select id="voiceSelect">
                <option value="Vietnamese Female">Giọng Nữ</option>
                <option value="Vietnamese Male">Giọng Nam</option>
            </select>
            <select id="rateSelect">
                <option value="0.8">Chậm</option>
                <option value="1" selected>Bình thường</option>
                <option value="1.2">Nhanh</option>
            </select>
        </div>
    </div>

    
    <audio id="mp3Player" class="audio-player" controls style="width: 100%; margin-top: 10px; display: none;">
        <source id="mp3Source" type="audio/mpeg">
        Trình duyệt không hỗ trợ phát audio.
    </audio>

    <div class="progress-container">
        <div id="progress" class="progress-bar"></div>
    </div>

    <div id="status" class="status">
        <span id="statusText"></span>
    </div>
</div>


            <p>Phòng ngừa ung thư cổ tử cung:</p><p><br></p><p>Cổ tử cung là phần dưới cùng của tử cung; nó mở vào âm đạo</p><p><br></p><p>Ung thư cổ tử cung xảy ra khi các tế bào bình thường ở cổ tử cung biến đổi thành tế bào bất thường và phát triển không kiểm soát.</p><p><br></p><p>Có hai loại ung thư cổ tử cung là “ung thư biểu mô tế bào vảy” và “ung thư biểu mô tuyến”.</p><p><br></p><p>Xét nghiệm tầm soát ung thư cổ tử cung:</p><p><br></p><p>Các xét nghiệm sàng lọc có thể phát hiện ung thư cổ tử cung và tiền ung thư ở giai đoạn đầu khi có thể điều trị được, do đó có thể làm giảm số lượng người mắc ung thư cổ tử cung cũng như số ca tử vong do căn bệnh này.</p><p><br></p><p>Có hai loại xét nghiệm sàng lọc ung thư cổ tử cung:</p><p><br></p><p>Xét nghiệm Papanicolaou hoặc “Pap” (đôi khi được gọi là “Pap smear”)</p><p>Xét nghiệm virus u nhú ở người hoặc “HPV”</p><p>Hoặc kết hợp cả hai bài kiểm tra</p><p><br></p><p>Các yếu tố rủi ro:</p><p><br></p><p>Yếu tố nguy cơ quan trọng nhất của ung thư cổ tử cung là nhiễm virus papilloma ở người (HPV).</p><p><br></p><p>Có hơn 100 loại HPV khác nhau; tuy nhiên, hầu hết các loại HPV không gây ung thư.</p><p><br></p><p>Ít nhất 80 phần trăm phụ nữ tiếp xúc với vi-rút HPV trong suốt cuộc đời. Hầu hết thời gian, hệ thống miễn dịch của cơ thể sẽ loại bỏ vi-rút trước khi nó gây hại.</p><p><br></p><p>Các loại HPV được chia thành nguy cơ cao và thấp gây ung thư cổ tử cung.</p><p><br></p><p>Các loại HPV nguy cơ thấp – Ví dụ, HPV loại 6 và 11 có thể gây ra mụn cóc sinh dục và là loại nguy cơ thấp vì chúng hiếm khi gây ra ung thư cổ tử cung.</p><p>Các loại HPV nguy cơ cao – Các loại HPV nguy cơ cao có thể gây ung thư cổ tử cung ở một số người.</p><p>Mặc dù hầu hết những người bị nhiễm các loại HPV nguy cơ cao không phát triển ung thư cổ tử cung, nhưng những người liên tục xét nghiệm dương tính với HPV nguy cơ cao có nguy cơ mắc ung thư cổ tử cung cao hơn.</p><p><br></p><p>HPV loại 16 và 18 là hai loại có nguy cơ cao.</p><p><br></p><p>Nhiễm trùng HPV xảy ra như thế nào?</p><p><br></p><p>HPV lây lan qua tiếp xúc da kề da trực tiếp, bao gồm quan hệ tình dục qua đường âm đạo, quan hệ tình dục bằng miệng, quan hệ tình dục qua đường hậu môn hoặc bất kỳ tiếp xúc nào khác liên quan đến vùng sinh dục (ví dụ: tiếp xúc từ tay đến bộ phận sinh dục).</p><p><br></p><p>Vì vậy, HPV lây truyền qua đường tình dục</p><p><br></p><p>Bao cao su chỉ có tác dụng bảo vệ một phần vì chúng không bao phủ toàn bộ vùng da ở bộ phận sinh dục.</p><p><br></p><p>Không thể bị nhiễm HPV khi chạm vào một vật nào đó, chẳng hạn như bệ ngồi bồn cầu.</p><p><br></p><p>Quá trình nhiễm HPV:</p><p><br></p><p>Hầu hết các trường hợp nhiễm HPV là tạm thời và sẽ khỏi trong vòng hai năm. Những người có hệ thống miễn dịch không thể loại bỏ được vi-rút (10-20%) có nguy cơ cao mắc tiền ung thư hoặc ung thư. Quá trình này thường mất nhiều năm.</p><p><br></p><p>Nguy cơ ung thư cổ tử cung tăng ở những người hút thuốc và những người mắc bệnh lý (hoặc đang dùng thuốc) làm suy yếu hệ miễn dịch.</p><p><br></p><p>Triệu chứng:</p><p><br></p><p>Hầu hết những người bị nhiễm HPV không có dấu hiệu hoặc triệu chứng.</p><p><br></p><p>Làm thế nào để giảm nguy cơ ung thư cổ tử cung?</p><p><br></p><p>Vắc-xin giúp ngăn ngừa nhiễm một số loại HPV có nguy cơ cao được khuyến nghị cho tất cả trẻ em từ 11 đến 12 tuổi, nhưng có thể tiêm sớm nhất là từ 9 tuổi. Vắc-xin "bù đắp" được khuyến nghị cho tất cả những người dưới 26 tuổi chưa tiêm vắc-xin này, nhưng có thể tiêm đến 45 tuổi.</p><p>Tầm soát ung thư cổ tử cung (kể cả những người đã tiêm vắc-xin)</p><p>Bỏ thuốc lá</p><p>Tầm soát ung thư cổ tử cung</p><p><br></p><p>1-Xét nghiệm Pap&nbsp;— Xét nghiệm Pap (đôi khi được gọi là “Pap smear”) là phương pháp kiểm tra các tế bào từ cổ tử cung. Một thuật ngữ khác của xét nghiệm Pap là “tế bào học cổ tử cung”.</p><p><br></p><p>Đối với xét nghiệm Pap, bác sĩ sẽ tiến hành kiểm tra vùng chậu bằng một thiết bị gọi là mỏ vịt để mở âm đạo. Sau đó, họ sẽ sử dụng một bàn chải nhỏ hoặc thìa để lấy tế bào từ cổ tử cung. Việc này có thể gây khó chịu nhưng thường không gây đau. Các tế bào được thêm vào một hộp đựng có chất lỏng bảo quản hoặc được bôi lên một phiến kính để kiểm tra.</p><p><br></p><p>2-Xét nghiệm HPV&nbsp;— Giống như xét nghiệm Pap, xét nghiệm vi-rút u nhú ở người (HPV) được thực hiện trong quá trình khám vùng chậu, sử dụng một chiếc chổi nhỏ để lấy mẫu từ cổ tử cung. Xét nghiệm HPV không xét nghiệm tất cả các loại HPV khác nhau. Chúng chỉ xét nghiệm các chủng HPV có nguy cơ cao gây ung thư cổ tử cung; kết quả dương tính cho thấy một hoặc nhiều chủng trong số này đã được tìm thấy. Đôi khi, phòng xét nghiệm sẽ báo cáo cụ thể nếu bạn mắc một trong hai loại HPV có nguy cơ cao nhất, được gọi là HPV 16 và HPV 18. Điều này được gọi là "xét nghiệm kiểu gen".</p><p><br></p><p>3-Xét nghiệm kết hợp&nbsp;— Bao gồm việc thực hiện xét nghiệm Pap và HPV cùng một lúc; còn được gọi là “xét nghiệm đồng thời”.</p><p><br></p><p>Xét nghiệm sàng lọc có thể được thực hiện bất cứ lúc nào trong chu kỳ kinh nguyệt của bạn. Tuy nhiên, không phải trong thời kỳ kinh nguyệt.</p><p><br></p><p>Ai nên được sàng lọc?</p><p><br></p><p>Mục tiêu là bắt đầu sàng lọc tại thời điểm mà lợi ích của việc sàng lọc có khả năng lớn hơn rủi ro.</p><p><br></p><p>Những người đã tiêm vắc-xin cũng nên được sàng lọc, vì vắc-xin có thể ngăn ngừa hầu hết các bệnh nhiễm HPV phổ biến nhưng không phải tất cả các bệnh nhiễm HPV.</p><p><br></p><p>Trước 21 tuổi:</p><p><br></p><p>Ở những người khỏe mạnh, việc sàng lọc không được khuyến khích</p><p><br></p><p>Tuổi từ 21 đến 29&nbsp;—</p><p><br></p><p>Có thể bắt đầu sàng lọc ở độ tuổi 25 cứ sau 3 năm bằng xét nghiệm Pap</p><p>Tuổi từ 30 đến 65</p><p><br></p><p>Xét nghiệm HPV chỉ (còn gọi là xét nghiệm HPV chính) năm năm một lần nếu tất cả kết quả đều bình thường</p><p>“Kiểm tra đồng thời” (cả xét nghiệm Pap và HPV) cứ năm năm một lần</p><p>Xét nghiệm Pap ba năm một lần nếu tất cả kết quả đều bình thường</p><p>Sau 65 tuổi&nbsp;— Hầu hết phụ nữ không có yếu tố nguy cơ có thể ngừng tầm soát ung thư cổ tử cung sau 65 tuổi</p><p><br></p><p>Những người đã thực hiện tất cả các xét nghiệm sàng lọc bình thường một cách thường xuyên trong quá khứ.</p><p>Những người có ít nhất ba xét nghiệm Pap liên tiếp cho kết quả bình thường hoặc hai xét nghiệm kết hợp bình thường (xét nghiệm Pap và HPV kết hợp) trong 10 năm qua, với xét nghiệm gần đây nhất được thực hiện trong vòng 5 năm qua.</p><p>Một số phụ nữ có yếu tố nguy cơ cần tiếp tục tầm soát ung thư cổ tử cung sau 65 tuổi nếu:</p><p><br></p><p>Họ có kết quả xét nghiệm Pap bất thường, xét nghiệm HPV bất thường hoặc điều trị ung thư hoặc tế bào tiền ung thư ở cổ tử cung, âm đạo, âm hộ hoặc hậu môn.</p><p>Họ bị nhiễm HIV hoặc mắc một tình trạng bệnh lý khác làm suy giảm hệ thống miễn dịch.</p><p>Họ đã tiếp xúc với diethylstilbestrol (DES) trong tử cung – DES là (một loại thuốc được dùng cho nhiều phụ nữ trước năm 1981 để ngăn ngừa biến chứng khi mang thai).</p><p>Sau khi cắt bỏ tử cung&nbsp;(phẫu thuật cắt bỏ tử cung và đôi khi là cổ tử cung)</p><p><br></p><p>Nếu cổ tử cung đã được cắt bỏ thì không cần phải sàng lọc thêm nữa.</p><p>Nếu không loại bỏ cevix (cần tuân theo hướng dẫn thông thường)</p>
            <div class="share-section">
                <div class="share-buttons">
                    <button onclick="shareOnFacebook()" class="share-button facebook">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"></path>
                        </svg>
                        Chia sẻ Facebook
                    </button>
                    <button onclick="shareOnTwitter()" class="share-button twitter">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"></path>
                        </svg>
                        Chia sẻ Twitter
                    </button>
                </div>
            </div>
        </div>

        <div class="related-section">
            <h2 class="related-title">Bài viết liên quan</h2>
            <div class="related-grid">
                
        <div class="related-article">
          <a href="../NEWS_20251026225706/NEWS_20251026225706.html">
            <img src="https://benhvienthucuc.vn/_next/image?url=https%3A%2F%2Fbenhvienthucuc.vn%2Fwp-content%2Fuploads%2F2016%2F12%2FNh%25E1%25BB%25AFng-b%25E1%25BB%2587nh-ph%25E1%25BB%25A5-khoa-b%25C3%25A0-b%25E1%25BA%25A7u-c%25C3%25B3-th%25E1%25BB%2583-m%25E1%25BA%25AFc.jpeg&amp;w=1080&amp;q=100" alt="Khám thai định kỳ">
          </a>
          <h3>
            <a href="../NEWS_20251026225706/NEWS_20251026225706.html">Khám thai định kỳ</a>
          </h3>
          <span class="date">26/10/2025</span>
        </div>
      
        <div class="related-article">
          <a href="../NEWS_20241228101505/NEWS_20241228101505.html">
            <img src="https://ilshospitals.com/blog/wp-content/uploads/2019/07/Common-Gynecological-Problems.png" alt="Các vấn đề phụ khoa thường gặp: Nguyên nhân, triệu chứng và phòng ngừa.">
          </a>
          <h3>
            <a href="../NEWS_20241228101505/NEWS_20241228101505.html">Các vấn đề phụ khoa thường gặp: Nguyên nhân, triệu chứng và phòng ngừa.</a>
          </h3>
          <span class="date">28/12/2024</span>
        </div>
      
        <div class="related-article">
          <a href="../NEWS_20241225192105/NEWS_20241225192105.html">
            <img src="https://github.com/fmcclinic/Medical_News/blob/main/news/image/C%C3%A1c%20b%E1%BB%87nh%20ph%E1%BB%A5%20khoa%20th%C6%B0%E1%BB%9Dng%20g%E1%BA%B7p%20v%C3%A0%20c%C3%A1ch%20ph%C3%B2ng%20ng%E1%BB%ABa.jpg?raw=true" alt="Các bệnh phụ khoa thường gặp và cách phòng ngừa.">
          </a>
          <h3>
            <a href="../NEWS_20241225192105/NEWS_20241225192105.html">Các bệnh phụ khoa thường gặp và cách phòng ngừa.</a>
          </h3>
          <span class="date">25/12/2024</span>
        </div>
                  </div>
        </div>
    </div>

<script>

let currentMP3File = null;
let audioPreviewUrl = null;
let isPlaying = false;
let isTTSPlaying = false;
let isMP3Playing = false;
let ttsInitialized = false;
let currentParagraphIndex = 0;
let paragraphs = [];


const TTS_CONFIG = {
    VOICE_OPTIONS: {
        'Vietnamese Female': {
            name: 'Vietnamese Female',
            lang: 'vi-VN',
            rate: 1,
            pitch: 1.1,
            volume: 1
        },
        'Vietnamese Male': {
            name: 'Vietnamese Male',
            lang: 'vi-VN',
            rate: 1,
            pitch: 0.9,
            volume: 1
        }
    },
    PAUSE_BETWEEN: 500 
};


document.addEventListener('DOMContentLoaded', function() {
    
    if (typeof responsiveVoice !== 'undefined') {
        responsiveVoice.OnVoiceReady = function() {
            console.log('ResponsiveVoice sẵn sàng');
            initTTS();
            setupMP3EventListeners();
        };
    }

    
    window.scrollTo(0, 0);
    updateParentHeight();
});


new ResizeObserver(updateParentHeight).observe(document.body);


function initTTS() {
    console.log('Đang khởi tạo TTS');
    try {
        if (!responsiveVoice.voiceSupport()) {
            throw new Error('Trình duyệt không hỗ trợ TTS');
        }

        setupElements();
        loadContentToRead();
        setupEventListeners();
        
        const playButton = document.getElementById('playButton');
        if (playButton) {
            playButton.disabled = false;
        }
        
        ttsInitialized = true;
        console.log('TTS đã khởi tạo thành công');
        updateStatus('Sẵn sàng đọc');

    } catch (error) {
        console.error('Lỗi khởi tạo TTS:', error);
        showError(error.message);
    }
}


function setupElements() {
    const elements = ['playButton', 'voiceSelect', 'rateSelect', 'status', 'progress'];
    elements.forEach(id => {
        if (!document.getElementById(id)) {
            throw new Error(`Thiếu element: ${id}`);
        }
    });
}


function loadContentToRead() {
    const title = document.querySelector('.article-title');
    const contentElements = document.querySelectorAll('.article-content p, .article-content div > p, .article-content ul > li, .article-content ol > li');
    
    console.log('Title element:', title);
    console.log('Content elements:', contentElements);

    paragraphs = [];

    
    if (title) {
        paragraphs.push({
            element: title,
            text: title.textContent.trim()
        });
    }

    
    contentElements.forEach(element => {
        const text = element.textContent.trim();
        if (text.length > 0) {
            paragraphs.push({
                element: element,
                text: text
            });
        }
    });

    console.log('Total paragraphs loaded:', paragraphs.length);
    console.log('Paragraphs content:', paragraphs.map(p => p.text));
}


function setupEventListeners() {
    console.log('Setting up event listeners');

    
    const playButton = document.getElementById('playButton');
    const voiceSelect = document.getElementById('voiceSelect');
    const rateSelect = document.getElementById('rateSelect');
    const mp3Button = document.getElementById('mp3Button');

    if (playButton) {
        playButton.addEventListener('click', function(e) {
            e.preventDefault();
            console.log('TTS button clicked');
            toggleSpeech();
        });
    }

    if (voiceSelect) {
        voiceSelect.addEventListener('change', handleVoiceChange);
    }

    if (rateSelect) {
        rateSelect.addEventListener('change', handleRateChange);
    }

    if (mp3Button) {
        mp3Button.addEventListener('click', toggleMP3);
    }

    console.log('Event listeners setup complete');
}


function toggleMP3() {
    console.log('toggleMP3 called');

    const mp3Player = document.getElementById('mp3Player');
    const mp3Button = document.getElementById('mp3Button');

    console.log('MP3 Player:', mp3Player);
    console.log('MP3 Button:', mp3Button);
    console.log('Current MP3 state - paused:', mp3Player?.paused);

    if (!mp3Player || !mp3Button) {
        console.error('MP3 elements not found');
        return;
    }

    
    const pathParts = window.location.pathname.split('/');
    const newsId = pathParts[pathParts.length - 1].replace('.html', '');
    
    
    const mp3Path = `${newsId}.mp3`;

    console.log('MP3 Path:', mp3Path);

    
    const mp3Source = mp3Player.querySelector('source');
    if (!mp3Source?.src) {
        console.log('Setting MP3 source to:', mp3Path);
        mp3Source.src = mp3Path;
    }

    
    console.log('Current source:', mp3Source.src);

    
    mp3Player.style.display = 'block';

    if (mp3Player.paused) {
        console.log('Attempting to play MP3...');
        
        
        mp3Player.load();
        
        mp3Player.addEventListener('loadeddata', function onLoad() {
            console.log('MP3 loaded, attempting to play');
            mp3Player.removeEventListener('loadeddata', onLoad);
            
            
            mp3Player.play()
                .then(() => {
                    console.log('MP3 playing successfully');
                    isMP3Playing = true;
                    mp3Button.innerHTML = `
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <rect x="6" y="4" width="4" height="16"></rect>
                            <rect x="14" y="4" width="4" height="16"></rect>
                        </svg>
                        <span>Tạm dừng</span>`;
                })
                .catch(error => {
                    console.error('Error playing MP3:', error);
                    isMP3Playing = false;
                });
        });
    } else {
        console.log('Pausing MP3...');
        mp3Player.pause();
        isMP3Playing = false;
        mp3Button.innerHTML = `
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <path d="M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3z"/>
                <path d="M19 10v2a7 7 0 0 1-14 0v-2"/>
            </svg>
            <span>Audio đã thu</span>`;
    }
}




function checkMP3Source() {
   const mp3Player = document.getElementById('mp3Player');
   const source = document.getElementById('mp3Source');
   const mp3Button = document.getElementById('mp3Button');
   
   console.log('Checking MP3 source elements:');
   console.log('Audio element:', mp3Player);
   console.log('Source element:', source);
   console.log('Button element:', mp3Button);
   
   if (mp3Player && source) {
       console.log('Current source:', source.src);
       console.log('Audio ready state:', mp3Player.readyState);
       console.log('Audio paused state:', mp3Player.paused);
       console.log('Audio current time:', mp3Player.currentTime);
       console.log('Audio duration:', mp3Player.duration);

       
       const isValidSource = source.src && source.src.length > 0;
       console.log('Is valid source:', isValidSource);

       
       if (isValidSource) {
           const testAudio = new Audio();
           testAudio.src = source.src;
           
           testAudio.addEventListener('loadedmetadata', () => {
               console.log('MP3 file is accessible');
               mp3Button.disabled = false;
           });

           testAudio.addEventListener('error', () => {
               console.error('Error loading MP3 file');
               mp3Button.disabled = true;
               showError('Không thể tải file MP3');
           });
       } else {
           console.log('No MP3 source set');
           mp3Button.disabled = true;
       }

       
       const events = mp3Player.eventNames?.() || [];
       console.log('Bound events:', events);

       return {
           hasSource: isValidSource,
           readyState: mp3Player.readyState,
           isPaused: mp3Player.paused,
           currentTime: mp3Player.currentTime,
           duration: mp3Player.duration
       };
   } else {
       console.error('Required MP3 elements not found');
       return null;
   }
}


function setupMP3EventListeners() {
    const mp3Player = document.getElementById('mp3Player');
    const mp3Button = document.getElementById('mp3Button');

    if (mp3Player && mp3Button) {
        mp3Player.addEventListener('ended', function() {
            isMP3Playing = false;
            mp3Button.innerHTML = `
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <path d="M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3z"/>
                    <path d="M19 10v2a7 7 0 0 1-14 0v-2"/>
                </svg>
                <span>Audio đã thu</span>`;
        });
    }
}


function toggleSpeech() {
    console.log('toggleSpeech called, ttsInitialized:', ttsInitialized);
    console.log('isPlaying:', isPlaying);

    
    if (isMP3Playing) {
        const mp3Player = document.getElementById('mp3Player');
        const mp3Button = document.getElementById('mp3Button');
        
        mp3Player.pause();
        isMP3Playing = false;
        if (mp3Button) {
            mp3Button.innerHTML = `
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <path d="M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3z"/>
                    <path d="M19 10v2a7 7 0 0 1-14 0v-2"/>
                </svg>
                <span>Audio đã thu</span>`;
        }
    }

    if (!ttsInitialized) {
        showError('TTS chưa sẵn sàng');
        return;
    }

    if (!isPlaying) {
        startReading();
        isTTSPlaying = true;
    } else {
        stopReading();
        isTTSPlaying = false;
    }
}

function startReading() {
    console.log('Starting reading');
    isPlaying = true;
    currentParagraphIndex = 0;
    updateUI('reading');
    readNextParagraph();
}


function readNextParagraph() {
    console.log('Reading paragraph:', currentParagraphIndex + 1, 'of', paragraphs.length);
    console.log('isPlaying status:', isPlaying);

    if (currentParagraphIndex < paragraphs.length) {
        try {
            const voiceName = document.getElementById('voiceSelect').value;
            const rate = parseFloat(document.getElementById('rateSelect').value);
            const voiceConfig = TTS_CONFIG.VOICE_OPTIONS[voiceName];

            updateProgress(((currentParagraphIndex + 1) / paragraphs.length) * 100);
            highlightParagraph(currentParagraphIndex);

            console.log('Current text:', paragraphs[currentParagraphIndex].text);

            responsiveVoice.speak(
                paragraphs[currentParagraphIndex].text,
                voiceName,
                {
                    pitch: voiceConfig.pitch,
                    rate: rate,
                    volume: voiceConfig.volume,
                    lang: voiceConfig.lang,
                    onstart: function() {
                        console.log(`Bắt đầu đọc đoạn ${currentParagraphIndex + 1}/${paragraphs.length}`);
                        updateStatus(`Đang đọc đoạn ${currentParagraphIndex + 1}/${paragraphs.length}`);
                    },
                    onend: function() {
                        console.log(`Kết thúc đọc đoạn ${currentParagraphIndex + 1}`);
                        unhighlightParagraph(currentParagraphIndex);
                        currentParagraphIndex++;

                        
                        if (isPlaying && currentParagraphIndex < paragraphs.length) {
                            console.log('Moving to next paragraph after delay');
                            setTimeout(readNextParagraph, TTS_CONFIG.PAUSE_BETWEEN);
                        } else if (currentParagraphIndex >= paragraphs.length) {
                            console.log('Reached end of content');
                            finishReading();
                        }
                    }
                }
            );
        } catch (error) {
            console.error('Error reading paragraph:', error);
            showError(error.message);
            stopReading();
        }
    } else {
        console.log('No more paragraphs to read');
        finishReading();
    }
}


function stopReading() {
    console.log('Stopping reading');
    responsiveVoice.cancel();
    isPlaying = false;
    isTTSPlaying = false;
    unhighlightAll();
    updateUI('paused');
}


function finishReading() {
    console.log('Finishing reading');
    isPlaying = false;
    isTTSPlaying = false;
    updateProgress(100);
    updateUI('finished');
    unhighlightAll();
}


function highlightParagraph(index) {
    if (paragraphs[index]) {
        paragraphs[index].element.classList.add('current');
        scrollToParagraph(paragraphs[index].element);
    }
}


function unhighlightParagraph(index) {
    if (paragraphs[index]) {
        paragraphs[index].element.classList.remove('current');
    }
}


function unhighlightAll() {
    paragraphs.forEach(p => p.element.classList.remove('current'));
}

function scrollToParagraph(element) {
    element.scrollIntoView({
        behavior: 'smooth',
        block: 'center'
    });
}


function updateUI(state) {
    const button = document.getElementById('playButton');
    if (button) {
        button.innerHTML = isPlaying ? 
            `<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <rect x="6" y="4" width="4" height="16"></rect>
                <rect x="14" y="4" width="4" height="16"></rect>
            </svg>
            <span>Tạm dừng</span>` :
            `<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <polygon points="5 3 19 12 5 21 5 3"></polygon>
            </svg>
            <span>Đọc bài viết</span>`;
    }
    updateStatus(state);
}

// Update status
function updateStatus(state) {
    const status = document.getElementById('status');
    const statusText = document.getElementById('statusText');
    if (status && statusText) {
        status.className = 'status active ' + state;
        statusText.textContent = typeof state === 'string' ? state : 
            state === 'reading' ? 'Đang đọc...' :
            state === 'paused' ? 'Đã tạm dừng' :
            state === 'finished' ? 'Đã đọc xong' : '';
    }
}


function updateProgress(percent) {
    const progress = document.getElementById('progress');
    if (progress) {
        progress.style.width = percent + '%';
    }
}


function handleVoiceChange() {
    if (isPlaying) {
        restartReading();
    }
}


function handleRateChange() {
    if (isPlaying) {
        restartReading();
    }
}


function restartReading() {
    stopReading();
    startReading();
}


function showError(message) {
    console.error(message);
    const statusText = document.getElementById('statusText');
    const status = document.getElementById('status');
    if (statusText && status) {
        statusText.textContent = message;
        status.className = 'status active error';
    }
}


function updateParentHeight() {
    const height = document.documentElement.scrollHeight;
    window.parent.postMessage({ height: height }, '*');
}


function shareOnFacebook() {
    const url = window.location.href;
    window.open('https://www.facebook.com/sharer/sharer.php?u=' + encodeURIComponent(url));
}

function shareOnTwitter() {
    const url = window.location.href;
    const title = document.title;
    window.open('https://twitter.com/intent/tweet?url=' + encodeURIComponent(url) + '&text=' + encodeURIComponent(title));
}
</script>
</body>
</html>