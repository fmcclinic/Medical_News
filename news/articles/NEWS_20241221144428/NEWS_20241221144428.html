<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dinh dưỡng trong thai kỳ - Ăn gì để mẹ khỏe con thông minh? - Tin Tức Y Khoa</title>
    
<script src="https://code.responsivevoice.org/responsivevoice.js?key=30xj8le1"></script>
        
  <script>
function waitForResponsiveVoice() {
    return new Promise((resolve, reject) => {
        let attempts = 0;
        const checkResponsiveVoice = setInterval(() => {
            attempts++;
            if (window.responsiveVoice && window.responsiveVoice.voiceSupport()) {
                clearInterval(checkResponsiveVoice);
                resolve();
            } else if (attempts > 50) { 
                clearInterval(checkResponsiveVoice);
                reject(new Error('ResponsiveVoice không load được'));
            }
        }, 100);
    });
}
    </script>


        <style>
         
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            background: #f5f5f5;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            flex: 1;
        }

         
        .article-category {
            display: inline-block;
            background: #0070c0;
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9em;
            margin-bottom: 15px;
        }

        .article-title {
            font-size: 2em;
            margin-bottom: 15px;
            line-height: 1.2;
            color: #333;
            padding: 10px;
        }

        .article-meta {
            color: #666;
            font-size: 0.9em;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 15px;
            flex-wrap: wrap;
        }

        .reading-time {
            display: inline-flex;
            align-items: center;
            gap: 5px;
            padding: 3px 8px;
            background: #f0f0f0;
            border-radius: 15px;
        }

         
        .article-content {
            background: white;
            padding: 30px;
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .featured-image {
            width: 100%;
            height: auto;
            max-height: 500px;
            object-fit: cover;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .article-content p {
            margin-bottom: 15px;
            line-height: 1.8;
            padding: 10px;
            border-radius: 4px;
            transition: all 0.3s ease;
        }

        .article-content p.current,
        .article-title.current {
            background: #f0f9ff;
            border-left: 3px solid #0070c0;
            padding-left: 15px;
        }

         
        .speech-controls {
            margin: 20px 0;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 8px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }

        .speech-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 15px;
        }

        .speech-title {
            font-size: 1.1em;
            font-weight: bold;
            color: #333;
        }

        .controls-container {
            display: flex;
            align-items: center;
            gap: 20px;
            flex-wrap: wrap;
        }

        .control-button {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px 20px;
            background: #0070c0;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .control-button:hover {
            opacity: 0.9;
            transform: translateY(-1px);
        }

        .control-button:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }

        .speed-control {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        select {
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            background: white;
            min-width: 120px;
        }

        .progress-container {
            margin-top: 15px;
            background: #e9ecef;
            height: 4px;
            border-radius: 2px;
            overflow: hidden;
        }

        .progress-bar {
            height: 100%;
            background: #0070c0;
            width: 0;
            transition: width 0.3s;
        }

        .status {
            padding: 10px 15px;
            margin: 10px 0;
            border-radius: 4px;
            display: none;
        }

        .status.active {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .status.reading {
            background: #e3f2fd;
            color: #0070c0;
            border-left: 4px solid #0070c0;
        }

        .status.paused {
            background: #fff3e0;
            color: #ef6c00;
            border-left: 4px solid #ef6c00;
        }

        .status.error {
            background: #ffebee;
            color: #c62828;
            border-left: 4px solid #c62828;
        }

         
        .related-section {
            margin-top: 40px;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .related-title {
            font-size: 1.5em;
            margin-bottom: 20px;
            color: #333;
        }

        .related-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
        }

        .related-article {
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            transition: transform 0.3s;
            height: 100%;
            display: flex;
            flex-direction: column;
        }

        .related-article:hover {
            transform: translateY(-3px);
        }

        .related-article img {
            width: 100%;
            height: 180px;
            object-fit: cover;
        }

        .related-article h3 {
            padding: 15px;
            margin: 0;
            flex: 1;
        }

        .related-article a {
            color: #333;
            text-decoration: none;
        }

        .related-article a:hover {
            color: #0070c0;
        }

        .related-article .date {
            display: block;
            padding: 0 15px 15px;
            color: #666;
            font-size: 0.9em;
        }

         
        .share-section {
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid #eee;
        }

        .share-buttons {
            display: flex;
            gap: 10px;
        }

        .share-button {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            border: none;
            border-radius: 4px;
            color: white;
            cursor: pointer;
            font-size: 14px;
            transition: opacity 0.3s;
        }

        .share-button:hover {
            opacity: 0.9;
        }

        .share-button.facebook {
            background: #1877f2;
        }

        .share-button.twitter {
            background: #1da1f2;
        }

         
        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }

            .article-title {
                font-size: 1.8em;
            }

            .article-meta {
                flex-direction: column;
                align-items: flex-start;
            }

            .controls-container {
                flex-direction: column;
                align-items: stretch;
            }

            .related-grid {
                grid-template-columns: 1fr;
            }
        }

        
 
        .article-content ul, 
        .article-content ol {
            padding-left: 40px !important;  
            margin-bottom: 15px;
            list-style-type: disc !important;  
        }

         
        .article-content li {
            display: list-item !important;
            list-style-type: disc !important;  
        }

         
        .article-content ul ul,
        .article-content ol ol,
        .article-content ul ol,
        .article-content ol ul {
            list-style-type: circle !important;
        }
</style>
</head>
<body>
    <div class="container">
        <span class="article-category">Sản Phụ Khoa</span>
        
        <h1 class="article-title">Dinh dưỡng trong thai kỳ - Ăn gì để mẹ khỏe con thông minh?</h1>
        
        <div class="article-meta">
            <span>Đăng ngày 21/12/2024</span>
            <span class="reading-time">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="10"></circle>
                    <polyline points="12 6 12 12 16 14"></polyline>
                </svg>
                4 phút đọc
            </span>
        </div>

        <img src="https://raw.githubusercontent.com/fmcclinic/Medical_News/refs/heads/main/news/image/A%20woman%20with%20a%20visible%20pregnancy.jpg" alt="Dinh dưỡng trong thai kỳ - Ăn gì để mẹ khỏe con thông minh?" class="featured-image">

        <div class="article-content">



<div class="speech-controls">
    <div class="speech-header">
        <span class="speech-title">Nghe bài viết</span>
    </div>
    
    <div class="controls-container">
        
        <button id="mp3Button" class="control-button" onclick="toggleMP3()">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <path d="M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3z"/>
                <path d="M19 10v2a7 7 0 0 1-14 0v-2"/>
            </svg>
            <span>Audio đã thu</span>
        </button>

        
        <button id="playButton" class="control-button">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <polygon points="5 3 19 12 5 21 5 3"></polygon>
            </svg>
            <span>Đọc bài viết</span>
        </button>
        
        
        <div class="speed-control">
            <select id="voiceSelect">
                <option value="Vietnamese Female">Giọng Nữ</option>
                <option value="Vietnamese Male">Giọng Nam</option>
            </select>
            <select id="rateSelect">
                <option value="0.8">Chậm</option>
                <option value="1" selected>Bình thường</option>
                <option value="1.2">Nhanh</option>
            </select>
        </div>
    </div>

    
    <audio id="mp3Player" class="audio-player" controls style="width: 100%; margin-top: 10px; display: none;">
        <source id="mp3Source" type="audio/mpeg">
        Trình duyệt không hỗ trợ phát audio.
    </audio>

    <div class="progress-container">
        <div id="progress" class="progress-bar"></div>
    </div>

    <div id="status" class="status">
        <span id="statusText"></span>
    </div>
</div>


            
        <style>
            
           .article-content ul, 
           .article-content ol { 
               list-style-type: disc !important; 
               list-style-image: none !important;
               margin-left: 20px !important; 
               padding-left: 1.5rem !important;
           }
           
            
           .article-content li { 
               list-style-type: disc !important; 
               display: list-item !important;
               margin-bottom: 5px; 
           }

            
           .article-content ul ul, .article-content ol ul,
           .article-content ul ol, .article-content ol ol {
               list-style-type: circle !important;
           }
        </style>
      <h1>Dinh dưỡng trong thai kỳ - Ăn gì để mẹ khỏe con thông minh?</h1><h2>Giới thiệu</h2><p>Dinh dưỡng trong thai kỳ đóng vai trò quan trọng đối với sự phát triển của thai nhi và sức khỏe của mẹ. Chế độ ăn đúng cách không chỉ giúp thai nhi phát triển toàn diện mà còn giúp mẹ duy trì sức khỏe tốt trong suốt thai kỳ.</p><h2>I. Nguyên tắc dinh dưỡng cơ bản</h2><h3>1. Nhu cầu năng lượng</h3><ul><li>3 tháng đầu: Tăng thêm 340 kcal/ngày</li><li>3 tháng giữa: Tăng thêm 450 kcal/ngày</li><li>3 tháng cuối: Tăng thêm 550 kcal/ngày</li></ul><p>Theo hướng dẫn của WHO và các tổ chức y tế, mức tăng cân khuyến nghị cho thai phụ dựa trên chỉ số BMI trước khi mang thai như sau:</p><p>Mức tăng cân khuyến nghị:</p><ul><li>BMI &lt; 18.5 (thiếu cân): nên tăng 12.5 đến 18 kg</li><li>BMI 18.5  đến 24.9 (bình thường): nên tăng 11.5 đến 16 kg</li><li>BMI 25 đến 29.9 (thừa cân): nên tăng 7 đến 11.5 kg</li><li>BMI ≥ 30 (béo phì): nên tăng  5 đến 9 kg</li></ul><p><br></p><p>Tuy nhiên, cần lưu ý thêm:</p><ul><li>Đây chỉ là khuyến nghị chung, mức tăng cân cụ thể cần được điều chỉnh theo từng trường hợp dưới sự theo dõi của bác sĩ.</li><li>Tăng cân không đều nhau trong các giai đoạn thai kỳ:</li></ul><ul><li>3 tháng đầu: Tăng khoảng 1 đến 2 kg</li><li>3 tháng giữa và cuối: Tăng đều đặn 0.3 đến 0.5 kg/tuần</li></ul><ul><li>Nếu mang thai đôi, mức tăng cân sẽ cao hơn:</li></ul><ul><li>BMI bình thường: 16.8 đến  24.5 kg</li><li>BMI thừa cân: 14.1 đến 22.7 kg</li><li>BMI béo phì: 11.3 đến 19.1 kg</li><li>Điều quan trọng là theo dõi cân nặng đều đặn và thông báo cho bác sĩ nếu tăng cân quá nhanh hoặc quá chậm so với khuyến nghị.</li></ul><h2>II. Các nhóm dưỡng chất thiết yếu</h2><h3>1. Protein (đạm)</h3><ul><li>Nhu cầu: 75 đến 100g/ngày</li><li>Nguồn thực phẩm:</li><li class="ql-indent-1">Thịt nạc, cá, trứng, sữa</li><li class="ql-indent-1">Đậu, đỗ các loại</li><li class="ql-indent-1">Các loại hạt</li></ul><h3>2. Carbohydrate (tinh bột)</h3><ul><li>Nhu cầu: 175g/ngày</li><li>Nguồn thực phẩm:</li><li class="ql-indent-1">Gạo, ngô, khoai</li><li class="ql-indent-1">Bánh mì nguyên cám</li><li class="ql-indent-1">Yến mạch</li></ul><h3>3. Chất béo</h3><ul><li>Nhu cầu: 20-35% tổng năng lượng</li><li>Nguồn thực phẩm:</li><li class="ql-indent-1">Dầu oliu, dầu đậu nành</li><li class="ql-indent-1">Cá béo (cá hồi, cá thu)</li><li class="ql-indent-1">Bơ, quả bơ</li></ul><h2>III. Vitamin và khoáng chất quan trọng</h2><h3>1. Acid folic</h3><ul><li>Nhu cầu: 600 đến 800mcg/ngày</li><li>Tác dụng: Ngăn ngừa dị tật ống thần kinh</li><li>Nguồn thực phẩm:</li><li class="ql-indent-1">Rau xanh đậm</li><li class="ql-indent-1">Ngũ cốc tăng cường</li><li class="ql-indent-1">Cam, chanh</li></ul><h3>2. Sắt</h3><ul><li>Nhu cầu: 27mg/ngày</li><li>Tác dụng: Phòng ngừa thiếu máu</li><li>Nguồn thực phẩm:</li><li class="ql-indent-1">Thịt đỏ</li><li class="ql-indent-1">Rau spinach</li><li class="ql-indent-1">Đậu đen</li></ul><h3>3. Canxi</h3><ul><li>Nhu cầu: 1000mg/ngày</li><li>Tác dụng: Phát triển xương và răng</li><li>Nguồn thực phẩm:</li><li class="ql-indent-1">Sữa và các sản phẩm từ sữa</li><li class="ql-indent-1">Cá nhỏ ăn được xương</li><li class="ql-indent-1">Rau xanh đậm màu</li></ul><h2>IV. Chế độ ăn theo từng giai đoạn</h2><h3>1. Ba tháng đầu</h3><ul><li>Ăn nhỏ, nhiều bữa</li><li>Ưu tiên thực phẩm dễ tiêu</li><li>Bổ sung acid folic</li><li>Tránh thực phẩm có nguy cơ ngộ độc</li></ul><h3>2. Ba tháng giữa</h3><ul><li>Tăng khẩu phần protein</li><li>Đa dạng các loại rau củ</li><li>Bổ sung canxi và sắt</li><li>Uống đủ nước</li></ul><h3>3. Ba tháng cuối</h3><ul><li>Ăn đủ nhưng không quá no</li><li>Tăng thực phẩm giàu chất xơ</li><li>Hạn chế muối</li><li>Chia nhỏ bữa ăn</li></ul><h2>V. Thực phẩm nên tránh</h2><h3>1. Thực phẩm có nguy cơ nhiễm khuẩn</h3><ul><li>Thịt, cá sống hoặc tái, các loại khô, mắm...</li><li>Trứng sống hoặc chưa chín kỹ</li><li>Pate, thịt nguội</li><li>Sữa chưa tiệt trùng</li></ul><h3>2. Thực phẩm có hại cho thai nhi</h3><ul><li>Đồ uống có cồn</li><li>Cà phê, trà đặc</li><li>Thực phẩm nhiều dầu mỡ</li><li>Thức ăn nhanh</li></ul><h2>VI. Lời khuyên thiết thực</h2><ul><li>Uống đủ nước (8-10 cốc/ngày)</li><li>Ăn đa dạng các nhóm thực phẩm</li><li>Ăn chậm, nhai kỹ</li><li>Không bỏ bữa</li><li>Tránh ăn đêm</li><li>Theo dõi cân nặng đều đặn</li><li>Tham khảo ý kiến bác sĩ về việc bổ sung vitamin tổng hợp</li></ul><h2>Kết luận</h2><p>Dinh dưỡng đúng cách trong thai kỳ không chỉ đơn thuần là ăn nhiều mà cần phải ăn đúng và đủ. Việc hiểu và áp dụng các nguyên tắc dinh dưỡng sẽ giúp thai phụ có một thai kỳ khỏe mạnh, đồng thời tạo nền tảng vững chắc cho sự phát triển của thai nhi. Nếu có bất kỳ thắc mắc về chế độ dinh dưỡng, thai phụ nên tham khảo ý kiến của bác sĩ hoặc chuyên gia dinh dưỡng để được tư vấn phù hợp với tình trạng sức khỏe của mình.</p>
            <div class="share-section">
                <div class="share-buttons">
                    <button onclick="shareOnFacebook()" class="share-button facebook">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"></path>
                        </svg>
                        Chia sẻ Facebook
                    </button>
                    <button onclick="shareOnTwitter()" class="share-button twitter">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"></path>
                        </svg>
                        Chia sẻ Twitter
                    </button>
                </div>
            </div>
        </div>

        <div class="related-section">
            <h2 class="related-title">Bài viết liên quan</h2>
            <div class="related-grid">
                
        <div class="related-article">
          <a href="../NEWS_20251026225706/NEWS_20251026225706.html"><img src="https://benhvienthucuc.vn/_next/image?url=https%3A%2F%2Fbenhvienthucuc.vn%2Fwp-content%2Fuploads%2F2016%2F12%2FNh%25E1%25BB%25AFng-b%25E1%25BB%2587nh-ph%25E1%25BB%25A5-khoa-b%25C3%25A0-b%25E1%25BA%25A7u-c%25C3%25B3-th%25E1%25BB%2583-m%25E1%25BA%25AFc.jpeg&amp;w=1080&amp;q=100" alt="Khám thai định kỳ"></a>
          <h3><a href="../NEWS_20251026225706/NEWS_20251026225706.html">Khám thai định kỳ</a></h3>
          <span class="date">26/10/2025</span>
        </div>
        <div class="related-article">
          <a href="../NEWS_20241228101505/NEWS_20241228101505.html"><img src="https://ilshospitals.com/blog/wp-content/uploads/2019/07/Common-Gynecological-Problems.png" alt="Các vấn đề phụ khoa thường gặp: Nguyên nhân, triệu chứng và phòng ngừa."></a>
          <h3><a href="../NEWS_20241228101505/NEWS_20241228101505.html">Các vấn đề phụ khoa thường gặp: Nguyên nhân, triệu chứng và phòng ngừa.</a></h3>
          <span class="date">28/12/2024</span>
        </div>
        <div class="related-article">
          <a href="../NEWS_20241225192105/NEWS_20241225192105.html"><img src="https://github.com/fmcclinic/Medical_News/blob/main/news/image/C%C3%A1c%20b%E1%BB%87nh%20ph%E1%BB%A5%20khoa%20th%C6%B0%E1%BB%9Dng%20g%E1%BA%B7p%20v%C3%A0%20c%C3%A1ch%20ph%C3%B2ng%20ng%E1%BB%ABa.jpg?raw=true" alt="Các bệnh phụ khoa thường gặp và cách phòng ngừa."></a>
          <h3><a href="../NEWS_20241225192105/NEWS_20241225192105.html">Các bệnh phụ khoa thường gặp và cách phòng ngừa.</a></h3>
          <span class="date">25/12/2024</span>
        </div>            </div>
        </div>
    </div>

<script>

let currentMP3File = null;
let audioPreviewUrl = null;
let isPlaying = false;
let isTTSPlaying = false;
let isMP3Playing = false;
let ttsInitialized = false;
let currentParagraphIndex = 0;
let paragraphs = [];


const TTS_CONFIG = {
    VOICE_OPTIONS: {
        'Vietnamese Female': {
            name: 'Vietnamese Female',
            lang: 'vi-VN',
            rate: 1,
            pitch: 1.1,
            volume: 1
        },
        'Vietnamese Male': {
            name: 'Vietnamese Male',
            lang: 'vi-VN',
            rate: 1,
            pitch: 0.9,
            volume: 1
        }
    },
    PAUSE_BETWEEN: 500 
};


document.addEventListener('DOMContentLoaded', function() {
    
    if (typeof responsiveVoice !== 'undefined') {
        responsiveVoice.OnVoiceReady = function() {
            console.log('ResponsiveVoice sẵn sàng');
            initTTS();
            setupMP3EventListeners();
        };
    }

    
    window.scrollTo(0, 0);
    updateParentHeight();
});


new ResizeObserver(updateParentHeight).observe(document.body);


function initTTS() {
    console.log('Đang khởi tạo TTS');
    try {
        if (!responsiveVoice.voiceSupport()) {
            throw new Error('Trình duyệt không hỗ trợ TTS');
        }

        setupElements();
        loadContentToRead();
        setupEventListeners();
        
        const playButton = document.getElementById('playButton');
        if (playButton) {
            playButton.disabled = false;
        }
        
        ttsInitialized = true;
        console.log('TTS đã khởi tạo thành công');
        updateStatus('Sẵn sàng đọc');

    } catch (error) {
        console.error('Lỗi khởi tạo TTS:', error);
        showError(error.message);
    }
}


function setupElements() {
    const elements = ['playButton', 'voiceSelect', 'rateSelect', 'status', 'progress'];
    elements.forEach(id => {
        if (!document.getElementById(id)) {
            throw new Error(`Thiếu element: ${id}`);
        }
    });
}


function loadContentToRead() {
    const title = document.querySelector('.article-title');
    const contentElements = document.querySelectorAll('.article-content p, .article-content div > p, .article-content ul > li, .article-content ol > li');
    
    console.log('Title element:', title);
    console.log('Content elements:', contentElements);

    paragraphs = [];

    
    if (title) {
        paragraphs.push({
            element: title,
            text: title.textContent.trim()
        });
    }

    
    contentElements.forEach(element => {
        const text = element.textContent.trim();
        if (text.length > 0) {
            paragraphs.push({
                element: element,
                text: text
            });
        }
    });

    console.log('Total paragraphs loaded:', paragraphs.length);
    console.log('Paragraphs content:', paragraphs.map(p => p.text));
}


function setupEventListeners() {
    console.log('Setting up event listeners');

    
    const playButton = document.getElementById('playButton');
    const voiceSelect = document.getElementById('voiceSelect');
    const rateSelect = document.getElementById('rateSelect');
    const mp3Button = document.getElementById('mp3Button');

    if (playButton) {
        playButton.addEventListener('click', function(e) {
            e.preventDefault();
            console.log('TTS button clicked');
            toggleSpeech();
        });
    }

    if (voiceSelect) {
        voiceSelect.addEventListener('change', handleVoiceChange);
    }

    if (rateSelect) {
        rateSelect.addEventListener('change', handleRateChange);
    }

    if (mp3Button) {
        mp3Button.addEventListener('click', toggleMP3);
    }

    console.log('Event listeners setup complete');
}


function toggleMP3() {
    console.log('toggleMP3 called');

    const mp3Player = document.getElementById('mp3Player');
    const mp3Button = document.getElementById('mp3Button');

    console.log('MP3 Player:', mp3Player);
    console.log('MP3 Button:', mp3Button);
    console.log('Current MP3 state - paused:', mp3Player?.paused);

    if (!mp3Player || !mp3Button) {
        console.error('MP3 elements not found');
        return;
    }

    
    const pathParts = window.location.pathname.split('/');
    const newsId = pathParts[pathParts.length - 1].replace('.html', '');
    
    
    const mp3Path = `${newsId}.mp3`;

    console.log('MP3 Path:', mp3Path);

    
    const mp3Source = mp3Player.querySelector('source');
    if (!mp3Source?.src) {
        console.log('Setting MP3 source to:', mp3Path);
        mp3Source.src = mp3Path;
    }

    
    console.log('Current source:', mp3Source.src);

    
    mp3Player.style.display = 'block';

    if (mp3Player.paused) {
        console.log('Attempting to play MP3...');
        
        
        mp3Player.load();
        
        mp3Player.addEventListener('loadeddata', function onLoad() {
            console.log('MP3 loaded, attempting to play');
            mp3Player.removeEventListener('loadeddata', onLoad);
            
            
            mp3Player.play()
                .then(() => {
                    console.log('MP3 playing successfully');
                    isMP3Playing = true;
                    mp3Button.innerHTML = `
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <rect x="6" y="4" width="4" height="16"></rect>
                            <rect x="14" y="4" width="4" height="16"></rect>
                        </svg>
                        <span>Tạm dừng</span>`;
                })
                .catch(error => {
                    console.error('Error playing MP3:', error);
                    isMP3Playing = false;
                });
        });
    } else {
        console.log('Pausing MP3...');
        mp3Player.pause();
        isMP3Playing = false;
        mp3Button.innerHTML = `
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <path d="M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3z"/>
                <path d="M19 10v2a7 7 0 0 1-14 0v-2"/>
            </svg>
            <span>Audio đã thu</span>`;
    }
}




function checkMP3Source() {
   const mp3Player = document.getElementById('mp3Player');
   const source = document.getElementById('mp3Source');
   const mp3Button = document.getElementById('mp3Button');
   
   console.log('Checking MP3 source elements:');
   console.log('Audio element:', mp3Player);
   console.log('Source element:', source);
   console.log('Button element:', mp3Button);
   
   if (mp3Player && source) {
       console.log('Current source:', source.src);
       console.log('Audio ready state:', mp3Player.readyState);
       console.log('Audio paused state:', mp3Player.paused);
       console.log('Audio current time:', mp3Player.currentTime);
       console.log('Audio duration:', mp3Player.duration);

       
       const isValidSource = source.src && source.src.length > 0;
       console.log('Is valid source:', isValidSource);

       
       if (isValidSource) {
           const testAudio = new Audio();
           testAudio.src = source.src;
           
           testAudio.addEventListener('loadedmetadata', () => {
               console.log('MP3 file is accessible');
               mp3Button.disabled = false;
           });

           testAudio.addEventListener('error', () => {
               console.error('Error loading MP3 file');
               mp3Button.disabled = true;
               showError('Không thể tải file MP3');
           });
       } else {
           console.log('No MP3 source set');
           mp3Button.disabled = true;
       }

       
       const events = mp3Player.eventNames?.() || [];
       console.log('Bound events:', events);

       return {
           hasSource: isValidSource,
           readyState: mp3Player.readyState,
           isPaused: mp3Player.paused,
           currentTime: mp3Player.currentTime,
           duration: mp3Player.duration
       };
   } else {
       console.error('Required MP3 elements not found');
       return null;
   }
}


function setupMP3EventListeners() {
    const mp3Player = document.getElementById('mp3Player');
    const mp3Button = document.getElementById('mp3Button');

    if (mp3Player && mp3Button) {
        mp3Player.addEventListener('ended', function() {
            isMP3Playing = false;
            mp3Button.innerHTML = `
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <path d="M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3z"/>
                    <path d="M19 10v2a7 7 0 0 1-14 0v-2"/>
                </svg>
                <span>Audio đã thu</span>`;
        });
    }
}


function toggleSpeech() {
    console.log('toggleSpeech called, ttsInitialized:', ttsInitialized);
    console.log('isPlaying:', isPlaying);

    
    if (isMP3Playing) {
        const mp3Player = document.getElementById('mp3Player');
        const mp3Button = document.getElementById('mp3Button');
        
        mp3Player.pause();
        isMP3Playing = false;
        if (mp3Button) {
            mp3Button.innerHTML = `
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <path d="M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3z"/>
                    <path d="M19 10v2a7 7 0 0 1-14 0v-2"/>
                </svg>
                <span>Audio đã thu</span>`;
        }
    }

    if (!ttsInitialized) {
        showError('TTS chưa sẵn sàng');
        return;
    }

    if (!isPlaying) {
        startReading();
        isTTSPlaying = true;
    } else {
        stopReading();
        isTTSPlaying = false;
    }
}

function startReading() {
    console.log('Starting reading');
    isPlaying = true;
    currentParagraphIndex = 0;
    updateUI('reading');
    readNextParagraph();
}


function readNextParagraph() {
    console.log('Reading paragraph:', currentParagraphIndex + 1, 'of', paragraphs.length);
    console.log('isPlaying status:', isPlaying);

    if (currentParagraphIndex < paragraphs.length) {
        try {
            const voiceName = document.getElementById('voiceSelect').value;
            const rate = parseFloat(document.getElementById('rateSelect').value);
            const voiceConfig = TTS_CONFIG.VOICE_OPTIONS[voiceName];

            updateProgress(((currentParagraphIndex + 1) / paragraphs.length) * 100);
            highlightParagraph(currentParagraphIndex);

            console.log('Current text:', paragraphs[currentParagraphIndex].text);

            responsiveVoice.speak(
                paragraphs[currentParagraphIndex].text,
                voiceName,
                {
                    pitch: voiceConfig.pitch,
                    rate: rate,
                    volume: voiceConfig.volume,
                    lang: voiceConfig.lang,
                    onstart: function() {
                        console.log(`Bắt đầu đọc đoạn ${currentParagraphIndex + 1}/${paragraphs.length}`);
                        updateStatus(`Đang đọc đoạn ${currentParagraphIndex + 1}/${paragraphs.length}`);
                    },
                    onend: function() {
                        console.log(`Kết thúc đọc đoạn ${currentParagraphIndex + 1}`);
                        unhighlightParagraph(currentParagraphIndex);
                        currentParagraphIndex++;

                        
                        if (isPlaying && currentParagraphIndex < paragraphs.length) {
                            console.log('Moving to next paragraph after delay');
                            setTimeout(readNextParagraph, TTS_CONFIG.PAUSE_BETWEEN);
                        } else if (currentParagraphIndex >= paragraphs.length) {
                            console.log('Reached end of content');
                            finishReading();
                        }
                    }
                }
            );
        } catch (error) {
            console.error('Error reading paragraph:', error);
            showError(error.message);
            stopReading();
        }
    } else {
        console.log('No more paragraphs to read');
        finishReading();
    }
}


function stopReading() {
    console.log('Stopping reading');
    responsiveVoice.cancel();
    isPlaying = false;
    isTTSPlaying = false;
    unhighlightAll();
    updateUI('paused');
}


function finishReading() {
    console.log('Finishing reading');
    isPlaying = false;
    isTTSPlaying = false;
    updateProgress(100);
    updateUI('finished');
    unhighlightAll();
}


function highlightParagraph(index) {
    if (paragraphs[index]) {
        paragraphs[index].element.classList.add('current');
        scrollToParagraph(paragraphs[index].element);
    }
}


function unhighlightParagraph(index) {
    if (paragraphs[index]) {
        paragraphs[index].element.classList.remove('current');
    }
}


function unhighlightAll() {
    paragraphs.forEach(p => p.element.classList.remove('current'));
}

function scrollToParagraph(element) {
    element.scrollIntoView({
        behavior: 'smooth',
        block: 'center'
    });
}


function updateUI(state) {
    const button = document.getElementById('playButton');
    if (button) {
        button.innerHTML = isPlaying ? 
            `<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <rect x="6" y="4" width="4" height="16"></rect>
                <rect x="14" y="4" width="4" height="16"></rect>
            </svg>
            <span>Tạm dừng</span>` :
            `<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <polygon points="5 3 19 12 5 21 5 3"></polygon>
            </svg>
            <span>Đọc bài viết</span>`;
    }
    updateStatus(state);
}

// Update status
function updateStatus(state) {
    const status = document.getElementById('status');
    const statusText = document.getElementById('statusText');
    if (status && statusText) {
        status.className = 'status active ' + state;
        statusText.textContent = typeof state === 'string' ? state : 
            state === 'reading' ? 'Đang đọc...' :
            state === 'paused' ? 'Đã tạm dừng' :
            state === 'finished' ? 'Đã đọc xong' : '';
    }
}


function updateProgress(percent) {
    const progress = document.getElementById('progress');
    if (progress) {
        progress.style.width = percent + '%';
    }
}


function handleVoiceChange() {
    if (isPlaying) {
        restartReading();
    }
}


function handleRateChange() {
    if (isPlaying) {
        restartReading();
    }
}


function restartReading() {
    stopReading();
    startReading();
}


function showError(message) {
    console.error(message);
    const statusText = document.getElementById('statusText');
    const status = document.getElementById('status');
    if (statusText && status) {
        statusText.textContent = message;
        status.className = 'status active error';
    }
}


function updateParentHeight() {
    const height = document.documentElement.scrollHeight;
    window.parent.postMessage({ height: height }, '*');
}


function shareOnFacebook() {
    const url = window.location.href;
    window.open('https://www.facebook.com/sharer/sharer.php?u=' + encodeURIComponent(url));
}

function shareOnTwitter() {
    const url = window.location.href;
    const title = document.title;
    window.open('https://twitter.com/intent/tweet?url=' + encodeURIComponent(url) + '&text=' + encodeURIComponent(title));
}
</script>
</body>
</html>